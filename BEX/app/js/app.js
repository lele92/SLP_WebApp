function getMyBasepath(e){return"app/views/appViews/"+e}if("undefined"==typeof $)throw new Error("This application's JavaScript requires jQuery");var App=angular.module("angle",["ngRoute","ngAnimate","ngStorage","ngCookies","pascalprecht.translate","ui.bootstrap","ui.router","oc.lazyLoad","cfp.loadingBar","ngSanitize","ngResource","tmh.dynamicLocale","ui.utils"]);App.run(["$rootScope","$state","$stateParams","$window","$templateCache","ArticlesInfoService",function(e,t,r,o,n,a){e.$state=t,e.$stateParams=r,e.$storage=o.localStorage,e.app={name:"BEX",description:"Web App to search and browse the contents of Semantic Lancet Triplestore",year:(new Date).getFullYear(),layout:{isFixed:!0,isCollapsed:!1,isBoxed:!1,isRTL:!1,horizontal:!1,isFloat:!1,asideHover:!1,theme:null},useFullLayout:!1,hiddenFooter:!1,viewAnimation:"ng-fadeInUp"},e.authors=[],a.getAllAuthors().then(function(t){e.authors=[];var r=t.data.results.bindings;for(var o in r)e.authors.push(r[o].fullName.value)},function(t){e.authors=[],ngDialog.open({template:"app/templates/dialog-error.html"}),console.error("Error while fetching authors. "+t.status+": "+t.statusText)}),e.colorsMap={"http://purl.org/spar/cito/citesForInformation":{color:"#1693A5",toString:"cites for information",value:"http://purl.org/spar/cito/citesForInformation"},"http://purl.org/spar/cito/citesAsMetadataDocument":{color:"#2f9e68",toString:"cites as metadata document",value:"http://purl.org/spar/cito/citesAsMetadataDocument"},"http://purl.org/spar/cito/citesAsDataSource":{color:"#1B6E72",toString:"cites as data source",value:"http://purl.org/spar/cito/citesAsDataSource"},"http://purl.org/spar/cito/citesAsAuthority":{color:"#6B8E23",toString:"cites as authority",value:"http://purl.org/spar/cito/citesAsAuthority"},"http://purl.org/spar/cito/obtainsSupportFrom":{color:"#663399",toString:"obtains support from",value:"http://purl.org/spar/cito/obtainsSupportFrom"},"http://purl.org/spar/cito/includesExcerptFrom":{color:"#2E8B57",toString:"includes excerpt from",value:"http://purl.org/spar/cito/includesExcerptFrom"},"http://purl.org/spar/cito/confirms":{color:"#D8BFD8",toString:"confirms",value:"http://purl.org/spar/cito/confirms"},"http://purl.org/spar/cito/containsAssertionFrom":{color:"#FF6347",toString:"contains assertion from",value:"http://purl.org/spar/cito/containsAssertionFrom"},"http://purl.org/spar/cito/derides":{color:"#CD5C5C",toString:"derides",value:"http://purl.org/spar/cito/derides"},"http://purl.org/spar/cito/includesQuotationFrom":{color:"#DAA520",toString:"includes quotation from",value:"http://purl.org/spar/cito/includesQuotationFrom"},"http://purl.org/spar/cito/citesAsRelated":{color:"#483D8B",toString:"cites as related",value:"http://purl.org/spar/cito/citesAsRelated"},"http://purl.org/spar/cito/usesMethodIn":{color:"#8B0000",toString:"uses method in",value:"http://purl.org/spar/cito/usesMethodIn"},"http://purl.org/spar/cito/documents":{color:"#008B8B",toString:"documents",value:"http://purl.org/spar/cito/documents"},"http://purl.org/spar/cito/describes":{color:"#698296",toString:"describes",value:"http://purl.org/spar/cito/describes"},"http://purl.org/spar/cito/usesConclusionsFrom":{color:"#efca95",toString:"uses conclusions from",value:"http://purl.org/spar/cito/usesConclusionsFrom"},"http://purl.org/spar/cito/repliesTo":{color:"#698296",toString:"replies to",value:"http://purl.org/spar/cito/repliesTo"},"http://purl.org/spar/cito/qualifies":{color:"#653838",toString:"qualifies",value:"http://purl.org/spar/cito/qualifies"},"http://purl.org/spar/cito/corrects":{color:"#7aa33e",toString:"corrects",value:"http://purl.org/spar/cito/corrects"},"http://purl.org/spar/cito/agreesWith":{color:"#6a5ca4",toString:"agrees with",value:"http://purl.org/spar/cito/agreesWith"},"http://purl.org/spar/cito/citesAsEvidence":{color:"#946D67",toString:"cites as evidence",value:"http://purl.org/spar/cito/citesAsEvidence"},"http://purl.org/spar/cito/usesDataFrom":{color:"#b559a2",toString:"uses data from",value:"http://purl.org/spar/cito/usesDataFrom"},"http://purl.org/spar/cito/parodies":{color:"#C71E3F",toString:"parodies",value:"http://purl.org/spar/cito/parodies"},"http://purl.org/spar/cito/critiques":{color:"#3d6e4e",toString:"critiques",value:"http://purl.org/spar/cito/critiques"},"http://purl.org/spar/cito/compiles":{color:"#ac4987",toString:"compiles",value:"http://purl.org/spar/cito/compiles"},"http://purl.org/spar/cito/speculatesOn":{color:"#896fc2",toString:"speculates on",value:"http://purl.org/spar/cito/speculatesOn"},"http://purl.org/spar/cito/extends":{color:"#613e49",toString:"extends",value:"http://purl.org/spar/cito/extends"},"http://purl.org/spar/cito/citesAsSourceDocument":{color:"#c4c5c9",toString:"cites as source document",value:"http://purl.org/spar/cito/citesAsSourceDocument"},"http://purl.org/spar/cito/updates":{color:"#f29598",toString:"updates",value:"http://purl.org/spar/cito/updates"},"http://purl.org/spar/cito/discusses":{color:"#1b3b14",toString:"discusses",value:"http://purl.org/spar/cito/discusses"},"http://purl.org/spar/cito/citesAsPotentialSolution":{color:"#2a2073",toString:"cites as potential solution",value:"http://purl.org/spar/cito/citesAsPotentialSolution"},"http://purl.org/spar/cito/obtainsBackgroundFrom":{color:"#2c51af",toString:"obtains background from",value:"http://purl.org/spar/cito/obtainsBackgroundFrom"},"http://purl.org/spar/cito/reviews":{color:"#302006",toString:"reviews",value:"http://purl.org/spar/cito/reviews"},"http://purl.org/spar/cito/supports":{color:"#7d7b58",toString:"supports",value:"http://purl.org/spar/cito/supports"},"http://purl.org/spar/cito/citesAsRecommendedReading":{color:"#cc370e",toString:"cites as recommended reading",value:"http://purl.org/spar/cito/citesAsRecommendedReading"},"http://purl.org/spar/cito/credits":{color:"#d3ccf0",toString:"credits",value:"http://purl.org/spar/cito/credits"},"http://purl.org/spar/cito/disagreesWith":{color:"#e89ec8",toString:"disagrees with",value:"http://purl.org/spar/cito/disagreesWith"},"http://purl.org/spar/cito/plagiarizes":{color:"#312673",toString:"plagiarizes",value:"http://purl.org/spar/cito/plagiarizes"}}}]),App.config(["$stateProvider","$locationProvider","$urlRouterProvider","RouteHelpersProvider",function(e,t,r,o){"use strict";t.html5Mode(!1),r.otherwise("/app/homeSearch"),e.state("app",{url:"/app","abstract":!0,templateUrl:o.basepath("app.html"),controller:"AppController",resolve:o.resolveFor("fastclick","modernizr","icons","screenfull","animo","slimscroll","toaster","whirl","ui.select")})}]).config(["$ocLazyLoadProvider","APP_REQUIRES",function(e,t){"use strict";e.config({debug:!1,events:!0,modules:t.modules})}]).config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(e,t,r,o){"use strict";App.controller=e.register,App.directive=t.directive,App.filter=r.register,App.factory=o.factory,App.service=o.service,App.constant=o.constant,App.value=o.value}]).config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"app/i18n/",suffix:".json"}),e.preferredLanguage("en"),e.useLocalStorage(),e.usePostCompiling(!0)}]).config(["tmhDynamicLocaleProvider",function(e){e.localeLocationPattern("vendor/angular-i18n/angular-locale_{{locale}}.js")}]).config(["cfpLoadingBarProvider",function(e){e.includeBar=!0,e.includeSpinner=!1,e.latencyThreshold=500,e.parentSelector=".wrapper > section"}]).config(["$tooltipProvider",function(e){e.options({appendToBody:!0})}]),App.constant("APP_COLORS",{primary:"#5d9cec",success:"#27c24c",info:"#23b7e5",warning:"#ff902b",danger:"#f05050",inverse:"#131e26",green:"#37bc9b",pink:"#f532e5",purple:"#7266ba",dark:"#3a3f51",yellow:"#fad732","gray-darker":"#232735","gray-dark":"#3a3f51",gray:"#dde6e9","gray-light":"#e4eaec","gray-lighter":"#edf1f2"}).constant("APP_MEDIAQUERY",{desktopLG:1200,desktop:992,tablet:768,mobile:480}).constant("APP_REQUIRES",{scripts:{whirl:["vendor/whirl/dist/whirl.css"],classyloader:["vendor/jquery-classyloader/js/jquery.classyloader.min.js"],animo:["vendor/animo.js/animo.js"],fastclick:["vendor/fastclick/lib/fastclick.js"],modernizr:["vendor/modernizr/modernizr.js"],animate:["vendor/animate.css/animate.min.css"],icons:["vendor/fontawesome/css/font-awesome.min.css","vendor/simple-line-icons/css/simple-line-icons.css"],sparklines:["app/vendor/sparklines/jquery.sparkline.min.js"],wysiwyg:["vendor/bootstrap-wysiwyg/bootstrap-wysiwyg.js","vendor/bootstrap-wysiwyg/external/jquery.hotkeys.js"],slimscroll:["vendor/slimScroll/jquery.slimscroll.min.js"],screenfull:["vendor/screenfull/dist/screenfull.js"],"vector-map":["vendor/ika.jvectormap/jquery-jvectormap-1.2.2.min.js","vendor/ika.jvectormap/jquery-jvectormap-1.2.2.css"],"vector-map-maps":["vendor/ika.jvectormap/jquery-jvectormap-world-mill-en.js","vendor/ika.jvectormap/jquery-jvectormap-us-mill-en.js"],loadGoogleMapsJS:["app/vendor/gmap/load-google-maps.js"],"flot-chart":["vendor/Flot/jquery.flot.js"],"flot-chart-plugins":["vendor/flot.tooltip/js/jquery.flot.tooltip.min.js","vendor/Flot/jquery.flot.resize.js","vendor/Flot/jquery.flot.pie.js","vendor/Flot/jquery.flot.time.js","vendor/Flot/jquery.flot.categories.js","vendor/flot-spline/js/jquery.flot.spline.min.js"],"jquery-ui":["vendor/jquery-ui/ui/core.js","vendor/jquery-ui/ui/widget.js"],"jquery-ui-widgets":["vendor/jquery-ui/ui/core.js","vendor/jquery-ui/ui/widget.js","vendor/jquery-ui/ui/mouse.js","vendor/jquery-ui/ui/draggable.js","vendor/jquery-ui/ui/droppable.js","vendor/jquery-ui/ui/sortable.js","vendor/jqueryui-touch-punch/jquery.ui.touch-punch.min.js"],moment:["vendor/moment/min/moment-with-locales.min.js"],inputmask:["vendor/jquery.inputmask/dist/jquery.inputmask.bundle.min.js"],flatdoc:["vendor/flatdoc/flatdoc.js"],codemirror:["vendor/codemirror/lib/codemirror.js","vendor/codemirror/lib/codemirror.css"],"codemirror-modes-web":["vendor/codemirror/mode/javascript/javascript.js","vendor/codemirror/mode/xml/xml.js","vendor/codemirror/mode/htmlmixed/htmlmixed.js","vendor/codemirror/mode/css/css.js"],taginput:["vendor/bootstrap-tagsinput/dist/bootstrap-tagsinput.css","vendor/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"],filestyle:["vendor/bootstrap-filestyle/src/bootstrap-filestyle.js"],parsley:["vendor/parsleyjs/dist/parsley.min.js"],datatables:["vendor/datatables/media/js/jquery.dataTables.min.js","app/vendor/datatable-bootstrap/css/dataTables.bootstrap.css"],"datatables-pugins":["app/vendor/datatable-bootstrap/js/dataTables.bootstrap.js","app/vendor/datatable-bootstrap/js/dataTables.bootstrapPagination.js","vendor/datatables-colvis/js/dataTables.colVis.js","vendor/datatables-colvis/css/dataTables.colVis.css"],fullcalendar:["vendor/fullcalendar/dist/fullcalendar.min.js","vendor/fullcalendar/dist/fullcalendar.css"],gcal:["vendor/fullcalendar/dist/gcal.js"],nestable:["vendor/nestable/jquery.nestable.js"],chartjs:["vendor/Chart.js/Chart.js"],morris:["vendor/raphael/raphael.js","vendor/morris.js/morris.js","vendor/morris.js/morris.css"]},modules:[{name:"toaster",files:["vendor/angularjs-toaster/toaster.js","vendor/angularjs-toaster/toaster.css"]},{name:"localytics.directives",files:["vendor/chosen_v1.2.0/chosen.jquery.min.js","vendor/chosen_v1.2.0/chosen.min.css","vendor/angular-chosen-localytics/chosen.js"]},{name:"ngDialog",files:["vendor/ngDialog/js/ngDialog.min.js","vendor/ngDialog/css/ngDialog.min.css","vendor/ngDialog/css/ngDialog-theme-default.min.css"]},{name:"ngWig",files:["vendor/ngWig/dist/ng-wig.min.js"]},{name:"ngTable",files:["vendor/ng-table/dist/ng-table.min.js","vendor/ng-table/dist/ng-table.min.css"]},{name:"ngTableExport",files:["vendor/ng-table-export/ng-table-export.js"]},{name:"angularBootstrapNavTree",files:["vendor/angular-bootstrap-nav-tree/dist/abn_tree_directive.js","vendor/angular-bootstrap-nav-tree/dist/abn_tree.css"]},{name:"htmlSortable",files:["vendor/html.sortable/dist/html.sortable.js","vendor/html.sortable/dist/html.sortable.angular.js"]},{name:"xeditable",files:["vendor/angular-xeditable/dist/js/xeditable.js","vendor/angular-xeditable/dist/css/xeditable.css"]},{name:"angularFileUpload",files:["vendor/angular-file-upload/angular-file-upload.js"]},{name:"ngImgCrop",files:["vendor/ng-img-crop/compile/unminified/ng-img-crop.js","vendor/ng-img-crop/compile/unminified/ng-img-crop.css"]},{name:"ui.select",files:["vendor/angular-ui-select/dist/select.js","vendor/angular-ui-select/dist/select.css"]},{name:"ui.codemirror",files:["vendor/angular-ui-codemirror/ui-codemirror.js"]},{name:"angular-carousel",files:["vendor/angular-carousel/dist/angular-carousel.css","vendor/angular-carousel/dist/angular-carousel.js"]},{name:"ngGrid",files:["vendor/ng-grid/build/ng-grid.min.js","vendor/ng-grid/ng-grid.css"]},{name:"infinite-scroll",files:["vendor/ngInfiniteScroll/build/ng-infinite-scroll.js"]},{name:"ui.bootstrap-slider",files:["vendor/seiyria-bootstrap-slider/dist/bootstrap-slider.min.js","vendor/seiyria-bootstrap-slider/dist/css/bootstrap-slider.min.css","vendor/angular-bootstrap-slider/slider.js"]},{name:"ui.grid",files:["vendor/angular-ui-grid/ui-grid.min.css","vendor/angular-ui-grid/ui-grid.min.js"]},{name:"textAngularSetup",files:["vendor/textAngular/src/textAngularSetup.js"]},{name:"textAngular",files:["vendor/textAngular/dist/textAngular-rangy.min.js","vendor/textAngular/src/textAngular.js","vendor/textAngular/src/textAngular.css"]},{name:"angular-rickshaw",files:["vendor/d3/d3.min.js","vendor/rickshaw/rickshaw.js","vendor/rickshaw/rickshaw.min.css","vendor/angular-rickshaw/rickshaw.js"],serie:!0},{name:"angular-chartist",files:["vendor/chartist/dist/chartist.min.css","vendor/chartist/dist/chartist.js","vendor/angular-chartist.js/dist/angular-chartist.js"],serie:!0},{name:"ui.map",files:["vendor/angular-ui-map/ui-map.js"]}]}),App.controller("CodeEditorController",["$scope","$http","$ocLazyLoad",function(e,t,r){function o(e){var t=e.split(".");switch(t=t?t[t.length-1]:""){case"html":return"htmlmixed";case"css":return"css";default:return"javascript"}}e.editorThemes=["3024-day","3024-night","ambiance-mobile","ambiance","base16-dark","base16-light","blackboard","cobalt","eclipse","elegant","erlang-dark","lesser-dark","mbo","mdn-like","midnight","monokai","neat","neo","night","paraiso-dark","paraiso-light","pastel-on-dark","rubyblue","solarized","the-matrix","tomorrow-night-eighties","twilight","vibrant-ink","xq-dark","xq-light"],e.editorOpts={mode:"javascript",lineNumbers:!0,matchBrackets:!0,theme:"mbo",viewportMargin:1/0},e.refreshEditor=0,e.loadTheme=function(){var t="vendor/codemirror/theme/";r.load(t+e.editorOpts.theme+".css"),e.refreshEditor=!e.refreshEditor},e.loadTheme(e.editorOpts.theme),e.code="// Open a file from the left menu \n// It will be requested to the server and loaded into the editor\n// Also try adding a New File from the toolbar\n";var n;e.handle_filetree=function(r){n=r;var a="server/editor/",i=!!r.children.length;console.log("You selected: "+r.label+" - isFolder? "+i),i||t.get(a+r.path).success(function(t){console.log("Loaded.. "+r.path),e.code=t,e.editorOpts.mode=o(r.path),console.log("Mode is: "+e.editorOpts.mode)})};var a;a=e.filetree={},e.new_filetree=function(){var e;return e=a.get_selected_branch(),e&&0===e.children.length&&(e=a.get_parent_branch(e)),a.add_branch(e,{label:"another.html",path:"source/another.html"})}}]).service("LoadTreeService",["$resource",function(e){return e("server/editor/filetree.json")}]),App.controller("InfiniteScrollController",["$scope","$timeout",function(e,t){e.images=[1,2,3,4,5,6,7,8,9,10],e.loadMore=function(){for(var t=e.images[e.images.length-1],r=1;10>=r;r++)e.images.push(t+r)}}]).factory("datasource",["$log","$timeout",function(e,t){"use strict";var r=function(e,r,o){return t(function(){var t,n,a,i;for(n=[],t=a=e,i=e+r-1;i>=e?i>=a:a>=i;t=i>=e?++a:--a)n.push("item #"+t);return o(n)},100)};return{get:r}}]),App.controller("LocalizationController",["$rootScope","tmhDynamicLocale","$locale",function(e,t,r){e.availableLocales={en:"English",es:"Spanish",de:"German",fr:"French",ar:"Arabic",ja:"Japanese",ko:"Korean",zh:"Chinese"},e.model={selectedLocale:"en"},e.$locale=r,e.changeLocale=t.set}]),App.controller("AppController",["$rootScope","$scope","$state","$translate","$window","$localStorage","$timeout","toggleStateService","colors","browser","cfpLoadingBar",function(e,t,r,o,n,a,i,s,c,l,u){"use strict";e.app.layout.horizontal="app-h"==e.$stateParams.layout;var d;e.$on("$stateChangeStart",function(e,t,r,o,n){$(".wrapper > section").length&&(d=i(function(){u.start()},0))}),e.$on("$stateChangeSuccess",function(e,t,r,o,n){e.targetScope.$watch("$viewContentLoaded",function(){i.cancel(d),u.complete()})}),e.$on("$stateNotFound",function(e,t,r,o){console.log(t.to),console.log(t.toParams),console.log(t.options)}),e.$on("$stateChangeError",function(e,t,r,o,n,a){console.log(a)}),e.$on("$stateChangeSuccess",function(t,o,a,i,s){n.scrollTo(0,0),e.currTitle=r.current.title}),e.currTitle=r.current.title,e.pageTitle=function(){var t=e.app.name+" - "+(e.currTitle||e.app.description);return document.title=t,t},e.$watch("app.layout.isCollapsed",function(t,r){t===!1&&e.$broadcast("closeSidebarMenu")}),angular.isDefined(a.layout)?t.app.layout=a.layout:a.layout=t.app.layout,e.$watch("app.layout",function(){a.layout=t.app.layout},!0),t.colorByName=c.byName,t.toggleUserBlock=function(){t.$broadcast("toggleUserBlock")},t.language={listIsOpen:!1,available:{en:"English",es_AR:"Español"},init:function(){var e=o.proposedLanguage()||o.use(),r=o.preferredLanguage();t.language.selected=t.language.available[e||r]},set:function(e,r){o.use(e),t.language.selected=t.language.available[e],t.language.listIsOpen=!t.language.listIsOpen}},t.language.init(),s.restoreState($(document.body)),e.cancel=function(e){e.stopPropagation()}}]),App.controller("ModalController",["$scope","$modal",function(e,t){e.open=function(e){var o=t.open({templateUrl:"/myModalContent.html",controller:r,size:e}),n=$("#modal-state");o.result.then(function(){n.text("Modal dismissed with OK status")},function(){n.text("Modal dismissed with Cancel status")})};var r=function(e,t){e.ok=function(){t.close("closed")},e.cancel=function(){t.dismiss("cancel")}};r.$inject=["$scope","$modalInstance"]}]),App.controller("NotificationController",["$scope",function(e){function t(e){for(var t=e.offsetTop,r=40;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop;return t-r-window.pageYOffset}function r(e){for(var t=e.offsetLeft,r=e.offsetWidth;e.offsetParent;)e=e.offsetParent,t+=e.offsetLeft;return t-r-window.pageXOffset}e.autoplace=function(e,o){var n="top";return t(o)<0&&(n="bottom"),r(o)<0&&(n="right"),n}}]),App.controller("SidebarController",["$rootScope","$scope","$state","$http","$timeout","Utils",function(e,t,r,o,n,a){function i(e){e+="";for(var t in c)(0>e||e.indexOf(t)<0)&&(c[t]=!0)}function s(e){return"string"==typeof e&&!(e.indexOf("-")<0)}var c=[];e.$watch("app.layout.asideHover",function(e,t){t===!1&&e===!0&&i(-1)});var l=function(e){if(e){if(e.sref&&"#"!=e.sref)return r.is(e.sref)||r.includes(e.sref);var t=!1;return angular.forEach(e.submenu,function(e,r){l(e)&&(t=!0)}),t}};t.getMenuItemPropClasses=function(e){return(e.heading?"nav-heading":"")+(l(e)?" active":"")},t.loadSidebarMenu=function(){var e="server/sidebar-menu.json",r=e+"?v="+(new Date).getTime();o.get(r).success(function(e){t.menuItems=e}).error(function(e,t,r,o){alert("Failure loading menu")})},t.loadSidebarMenu(),t.addCollapse=function(t,r){c[t]=e.app.layout.asideHover?!0:!l(r)},t.isCollapse=function(e){return c[e]},t.toggleCollapse=function(r,o){return a.isSidebarCollapsed()||e.app.layout.asideHover?!0:(angular.isDefined(c[r])?t.lastEventFromChild||(c[r]=!c[r],i(r)):o&&i(-1),t.lastEventFromChild=s(r),!0)}}]),App.controller("uiSelectController",["$scope","$http",function(e,t){e.disabled=void 0,e.enable=function(){e.disabled=!1},e.disable=function(){e.disabled=!0},e.clear=function(){e.person.selected=void 0,e.address.selected=void 0,e.country.selected=void 0},e.person={},e.people=[{name:"Adam",email:"adam@email.com",age:10},{name:"Amalie",email:"amalie@email.com",age:12},{name:"Wladimir",email:"wladimir@email.com",age:30},{name:"Samantha",email:"samantha@email.com",age:31},{name:"Estefanía",email:"estefanía@email.com",age:16},{name:"Natasha",email:"natasha@email.com",age:54},{name:"Nicole",email:"nicole@email.com",age:43},{name:"Adrian",email:"adrian@email.com",age:21}],e.address={},e.refreshAddresses=function(r){var o={address:r,sensor:!1};return t.get("http://maps.googleapis.com/maps/api/geocode/json",{params:o}).then(function(t){e.addresses=t.data.results})},e.country={},e.countries=[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People's Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People's Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Vietnam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}],e.someGroupFn=function(e){return e.name[0]>="A"&&e.name[0]<="M"?"From A - M":e.name[0]>="N"&&e.name[0]<="Z"?"From N - Z":void 0},e.counter=0,e.someFunction=function(t,r){e.counter++,e.eventResult={item:t,model:r}},e.availableColors=["Red","Green","Blue","Yellow","Magenta","Maroon","Umbra","Turquoise"],e.multipleDemo={},e.multipleDemo.colors=["Blue","Red"],e.multipleDemo.selectedPeople=[e.people[5],e.people[4]],e.multipleDemo.selectedPeopleWithGroupBy=[e.people[8],e.people[6]],e.multipleDemo.selectedPeopleSimple=["samantha@email.com","wladimir@email.com"]}]),App.filter("propsFilter",function(){return function(e,t){var r=[];return angular.isArray(e)?e.forEach(function(e){for(var o=!1,n=Object.keys(t),a=0;a<n.length;a++){var i=n[a],s=t[i].toLowerCase();if(-1!==e[i].toString().toLowerCase().indexOf(s)){o=!0;break}}o&&r.push(e)}):r=e,r}}),App.directive("href",function(){return{restrict:"A",compile:function(e,t){return function(e,r){(t.ngClick||""===t.href||"#"===t.href)&&(r.hasClass("dropdown-toggle")||r.on("click",function(e){e.preventDefault(),e.stopPropagation()}))}}}}),App.directive("animateEnabled",["$animate",function(e){return{link:function(t,r,o){t.$watch(function(){return t.$eval(o.animateEnabled,t)},function(t){e.enabled(!!t,r)})}}}]);var ChartJS=function(e){return{restrict:"A",scope:{data:"=",options:"=",id:"@",width:"=",height:"=",resize:"=",chart:"@",segments:"@",responsive:"=",tooltip:"=",legend:"="},link:function(t,r){var o=r[0].getContext("2d"),n=!1;t.size=function(){t.width<=0?(r.width(r.parent().width()),o.canvas.width=r.width()):(o.canvas.width=t.width||o.canvas.width,n=!0),t.height<=0?(r.height(r.parent().height()),o.canvas.height=o.canvas.width/2):(o.canvas.height=t.height||o.canvas.height,n=!0)},t.$watch("data",function(s,c){a&&a.destroy(),s&&(t.chart&&(e=t.chart),n&&(t.size(),i=new Chart(o)),(t.responsive||t.resize)&&(t.options.responsive=!0),void 0!==t.responsive&&(t.options.responsive=t.responsive),a=i[e](t.data,t.options),a.update(),t.legend&&angular.element(r[0]).parent().after(a.generateLegend()))},!0),t.$watch("tooltip",function(e,t){if(a&&a.draw(),void 0!==e&&a.segments&&!(!isFinite(e)||e>=a.segments.length||0>e)){var r=a.segments[e];r.save(),r.fillColor=r.highlightColor,a.showTooltip([r]),r.restore()}},!0),t.size();var a,i=new Chart(o)}}};App.directive("chartjs",function(){return ChartJS()}),App.directive("linechart",function(){return ChartJS("Line")}),App.directive("barchart",function(){return ChartJS("Bar")}),App.directive("radarchart",function(){return ChartJS("Radar")}),App.directive("polarchart",function(){return ChartJS("PolarArea")}),App.directive("piechart",function(){return ChartJS("Pie")}),App.directive("doughnutchart",function(){return ChartJS("Doughnut")}),App.directive("donutchart",function(){return ChartJS("Doughnut")}),App.directive("classyloader",["$timeout","Utils",function(e,t){"use strict";var r=$(window),o="js-is-in-view";return{restrict:"A",link:function(n,a,i){function s(e,r){var n=-20;!e.hasClass(o)&&t.isInView(e,{topoffset:n})&&c(e,r)}function c(e,t){e.ClassyLoader(t).addClass(o)}e(function(){var e=$(a),t=e.data();t&&(t.triggerInView?(r.scroll(function(){s(e,t)}),s(e,t)):c(e,t))},0)}}}]),App.directive("resetKey",["$state","$rootScope",function(e,t){"use strict";return{restrict:"A",scope:{resetKey:"="},link:function(e,t,r){e.resetKey=r.resetKey},controller:["$scope","$element",function(r,o){o.on("click",function(o){o.preventDefault(),r.resetKey?(delete t.$storage[r.resetKey],e.go(e.current,{},{reload:!0})):$.error("No storage key specified for reset.")})}]}}]),App.directive("filestyle",function(){return{restrict:"A",controller:["$scope","$element",function(e,t){var r=t.data();r.classInput=t.data("classinput")||r.classInput,t.filestyle(r)}]}}),App.directive("flatdoc",["$location",function(e){return{restrict:"EA",template:"<div role='flatdoc'><div role='flatdoc-menu'></div><div role='flatdoc-content'></div></div>",
link:function(e,t,r){Flatdoc.run({fetcher:Flatdoc.file(r.src)});var o=$("html, body");$(document).on("flatdoc:ready",function(){var e=$('[role="flatdoc-menu"]');e.find("a").on("click",function(t){t.preventDefault(),t.stopPropagation();var r=$(this);e.find("a.active").removeClass("active"),r.addClass("active"),o.animate({scrollTop:$(this.getAttribute("href")).offset().top-($(".topnavbar").height()+10)},800)})})}}}]),App.directive("flot",["$http","$timeout",function(e,t){"use strict";function r(r,o,n){function a(){var e;if(r.dataset&&r.options)return e=$.plot(d,r.dataset,r.options),r.$emit("plotReady",e),r.callback&&r.callback(e,r),e}function i(e){return u?(u.setData(e),u.setupGrid(),u.draw()):(u=a(),s(r.series),u)}function s(e){function t(e){return function(t,o){r[o]&&r[o][e]&&(r[o][e].show=t)}}if(u&&e){var r=u.getData();for(var o in e)angular.forEach(e[o],t(o));u.setData(r),u.draw()}}function c(o){o&&e.get(o).success(function(e){t(function(){r.dataset=e})}).error(function(){$.error("Flot chart: Bad request.")})}var l,u,d,p,m=220;u=null,p=n.width||"100%",l=n.height||m,d=$(o.children()[0]),d.css({width:p,height:l}),r.$watchCollection("dataset",i,!0),r.$watch("series",s,!0),r.$watch("src",c)}return{restrict:"EA",template:"<div></div>",scope:{dataset:"=?",options:"=",series:"=",callback:"=",src:"="},link:r}}]),App.directive("formWizard",["$parse",function(e){"use strict";function t(e,t,r){var o=this;o.quantity=parseInt(e,10),o.validate=t,o.element=r,o.init=function(){return o.createsteps(o.quantity),o.go(1),o},o.go=function(e){if(angular.isDefined(o.steps[e])){if(o.validate&&1!==e){var t=$(o.element),r=t.children().children("div").get(e-2);if(!1===t.parsley().validate(r.id))return!1}o.cleanall(),o.steps[e]=!0}},o.active=function(e){return!!o.steps[e]},o.cleanall=function(){for(var e in o.steps)o.steps[e]=!1},o.createsteps=function(e){o.steps=[];for(var t=1;e>=t;t++)o.steps[t]=!1}}return{restrict:"A",scope:!0,link:function(r,o,n){var a=e(n.validateSteps)(r),i=new t(n.steps,!!a,o);r.wizard=i.init()}}}]),App.directive("toggleFullscreen",function(){"use strict";return{restrict:"A",link:function(e,t,r){t.on("click",function(e){e.preventDefault(),screenfull.enabled?(screenfull.toggle(),screenfull.isFullscreen?$(this).children("em").removeClass("fa-expand").addClass("fa-compress"):$(this).children("em").removeClass("fa-compress").addClass("fa-expand")):$.error("Fullscreen not enabled")})}}}),App.directive("loadCss",function(){"use strict";function e(e){var t="autoloaded-stylesheet",r=$("#"+t).attr("id",t+"-old");return $("head").append($("<link/>").attr({id:t,rel:"stylesheet",href:e})),r.length&&r.remove(),$("#"+t)}return{restrict:"A",link:function(t,r,o){r.on("click",function(t){r.is("a")&&t.preventDefault();var n,a=o.loadCss;a?(n=e(a),n||$.error("Error creating stylesheet link element.")):$.error("No stylesheet location defined.")})}}}),App.directive("masked",function(){return{restrict:"A",controller:["$scope","$element",function(e,t){var r=$(t);$.fn.inputmask&&r.inputmask()}]}}),function(){"use strict";function e(e){return function(){return{restrict:"EA",scope:{morrisData:"=",morrisOptions:"="},link:function(t,r,o){t.$watch("morrisData",function(e,r){e&&(t.morrisInstance.setData(e),t.morrisInstance.redraw())},!0),t.morrisOptions.element=r,t.morrisData&&(t.morrisOptions.data=t.morrisData),t.morrisInstance=new Morris[e](t.morrisOptions)}}}}App.directive("morrisBar",e("Bar")),App.directive("morrisDonut",e("Donut")),App.directive("morrisLine",e("Line")),App.directive("morrisArea",e("Area"))}(),App.directive("searchOpen",["navSearch",function(e){"use strict";return{restrict:"A",controller:["$scope","$element",function(t,r){r.on("click",function(e){e.stopPropagation()}).on("click",e.toggle)}]}}]).directive("searchDismiss",["navSearch",function(e){"use strict";var t='.navbar-form input[type="text"]';return{restrict:"A",controller:["$scope","$element",function(r,o){$(t).on("click",function(e){e.stopPropagation()}).on("keyup",function(t){27==t.keyCode&&e.dismiss()}),$(document).on("click",e.dismiss),o.on("click",function(e){e.stopPropagation()}).on("click",e.dismiss)}]}}]),App.directive("nestable",["$timeout",function(e){return{restrict:"A",scope:{nestableControl:"="},controller:["$scope","$element",function(t,r){function o(e){return function(){r.nestable(e)}}r.data();if(e(function(){r.nestable()}),t.nestableControl){var n=t.nestableControl;n.serialize=function(){return r.nestable("serialize")},n.expandAll=o("expandAll"),n.collapseAll=o("collapseAll"),r.on("change",function(){"function"==typeof n.onchange&&e(function(){n.onchange.apply(arguments)})})}}]}}]),App.directive("notify",["$window",function(e){function t(e){var t=$(e),r=t.data("message"),o=t.data("options");r||$.error("Notify: No message specified"),$.notify(r,o||{})}return{restrict:"A",controller:["$scope","$element",function(e,r){r.on("click",function(e){e.preventDefault(),t(r)})}]}}]),function(e,t,r){var o={},n={},a=function(t){return"string"==e.type(t)&&(t={message:t}),arguments[1]&&(t=e.extend(t,"string"==e.type(arguments[1])?{status:arguments[1]}:arguments[1])),new s(t).show()},i=function(e,t){if(e)for(var r in n)e===n[r].group&&n[r].close(t);else for(var r in n)n[r].close(t)},s=function(t){this.options=e.extend({},s.defaults,t),this.uuid="ID"+(new Date).getTime()+"RAND"+Math.ceil(1e5*Math.random()),this.element=e(['<div class="uk-notify-message alert-dismissable">','<a class="close">&times;</a>',"<div>"+this.options.message+"</div>","</div>"].join("")).data("notifyMessage",this),this.options.status&&(this.element.addClass("alert alert-"+this.options.status),this.currentstatus=this.options.status),this.group=this.options.group,n[this.uuid]=this,o[this.options.pos]||(o[this.options.pos]=e('<div class="uk-notify uk-notify-'+this.options.pos+'"></div>').appendTo("body").on("click",".uk-notify-message",function(){e(this).data("notifyMessage").close()}))};return e.extend(s.prototype,{uuid:!1,element:!1,timout:!1,currentstatus:"",group:!1,show:function(){if(!this.element.is(":visible")){var e=this;o[this.options.pos].show().prepend(this.element);var t=parseInt(this.element.css("margin-bottom"),10);return this.element.css({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0}).animate({opacity:1,"margin-top":0,"margin-bottom":t},function(){if(e.options.timeout){var t=function(){e.close()};e.timeout=setTimeout(t,e.options.timeout),e.element.hover(function(){clearTimeout(e.timeout)},function(){e.timeout=setTimeout(t,e.options.timeout)})}}),this}},close:function(e){var t=this,r=function(){t.element.remove(),o[t.options.pos].children().length||o[t.options.pos].hide(),delete n[t.uuid]};this.timeout&&clearTimeout(this.timeout),e?r():this.element.animate({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0},function(){r()})},content:function(e){var t=this.element.find(">div");return e?(t.html(e),this):t.html()},status:function(e){return e?(this.element.removeClass("alert alert-"+this.currentstatus).addClass("alert alert-"+e),this.currentstatus=e,this):this.currentstatus}}),s.defaults={message:"",status:"normal",timeout:5e3,group:null,pos:"top-center"},e.notify=a,e.notify.message=s,e.notify.closeAll=i,a}(jQuery,window,document),App.directive("now",["dateFilter","$interval",function(e,t){return{restrict:"E",link:function(r,o,n){function a(){var t=e(new Date,i);o.text(t)}var i=n.format;a(),t(a,1e3)}}}]),App.directive("paneltool",["$compile","$timeout",function(e,t){function r(e,t){var r="";return t=t||{},t.toolCollapse&&(r+=o.collapse.replace(/{{panelId}}/g,e.parent().parent().attr("id"))),t.toolDismiss&&(r+=o.dismiss),t.toolRefresh&&(r+=o.refresh.replace(/{{spinner}}/g,t.toolRefresh)),r}var o={collapse:"<a href='#' panel-collapse='' tooltip='Collapse Panel' ng-click='{{panelId}} = !{{panelId}}'>                 <em ng-show='{{panelId}}' class='fa fa-plus'></em>                 <em ng-show='!{{panelId}}' class='fa fa-minus'></em>               </a>",dismiss:"<a href='#' panel-dismiss='' tooltip='Close Panel'>               <em class='fa fa-times'></em>             </a>",refresh:"<a href='#' panel-refresh='' data-spinner='{{spinner}}' tooltip='Refresh Panel'>               <em class='fa fa-refresh'></em>             </a>"};return{restrict:"E",scope:!1,link:function(o,n,a){var i=o.panelTools||a;t(function(){n.html(r(n,i)).show(),e(n.contents())(o),n.addClass("pull-right")})}}}]).directive("panelDismiss",["$q","Utils",function(e,t){"use strict";return{restrict:"A",controller:["$scope","$element",function(r,o){var n="panel-remove",a="panel-removed";o.on("click",function(){function o(){var t=e.defer(),o=t.promise;r.$emit(n,c.attr("id"),t),o.then(i)}function i(){t.support.animation?c.animo({animation:"bounceOut"},s):s()}function s(){var e=c.parent();c.remove(),e.filter(function(){var e=$(this);return e.is('[class*="col-"]:not(.sortable)')&&0===e.children("*").length}).remove(),r.$emit(a,c.attr("id"))}var c=$(this).closest(".panel");o()})}]}}]).directive("panelCollapse",["$timeout",function(e){"use strict";function t(e,t){if(!e)return!1;var r=angular.fromJson(o[n]);r||(r={}),r[e]=t,o[n]=angular.toJson(r)}function r(e){if(!e)return!1;var t=angular.fromJson(o[n]);return t?t[e]:void 0}var o,n="panelState";return{restrict:"A",scope:!1,controller:["$scope","$element",function(n,a){var i=$(a),s=i.closest(".panel"),c=s.attr("id");o=n.$storage;var l=r(c);"undefined"!=typeof l&&e(function(){n[c]=l},10),a.bind("click",function(){t(c,!n[c])})}]}}]).directive("panelRefresh",["$q",function(e){"use strict";return{restrict:"A",scope:!1,controller:["$scope","$element",function(e,t){function r(e,t){if(t){var r="#"==t.charAt(0)?t:"#"+t;angular.element(r).removeClass(n)}}var o="panel-refresh",n="whirl",a="standard";t.on("click",function(){var t=$(this),r=t.parents(".panel").eq(0),i=t.data("spinner")||a;r.addClass(n+" "+i),e.$emit(o,r.attr("id"))}),e.$on("removeSpinner",r)}]}}]),App.directive("animate",["$window","Utils",function(e,t){"use strict";var r=$(window).add("body, .wrapper");return{restrict:"A",link:function(e,o,n){function a(e){!e.hasClass("anim-running")&&t.isInView(e,{topoffset:s})&&(e.addClass("anim-running"),setTimeout(function(){e.addClass("anim-done").animo({animation:l,duration:.7})},c))}var i=$(o),s=i.data("offset"),c=i.data("delay")||100,l=i.data("play")||"bounce";"undefined"!=typeof s&&(a(i),r.scroll(function(){a(i)})),i.on("click",function(){var e=$(this),t=e.data("target"),r=e.data("play")||"bounce",o=$(t);o&&o&&o.animo({animation:r})})}}}]),App.directive("scrollable",function(){return{restrict:"EA",link:function(e,t,r){var o=250;t.slimScroll({height:r.height||o})}}}),App.directive("sidebar",["$rootScope","$window","Utils",function(e,t,r){function o(){var e=$("<div/>",{"class":"dropdown-backdrop"});e.insertAfter(".aside-inner").on("click mouseenter",function(){i()})}function n(e){e.siblings("li").removeClass("open").end().toggleClass("open")}function a(e){i();var t=e.children("ul");if(!t.length)return $();if(e.hasClass("open"))return n(e),$();var r=$(".aside"),o=$(".aside-inner"),a=parseInt(o.css("padding-top"),0)+parseInt(r.css("padding-top"),0),u=t.clone().appendTo(r);n(e);var d=e.position().top+a-c.scrollTop(),p=l.height();return u.addClass("nav-floating").css({position:s.app.layout.isFixed?"fixed":"absolute",top:d,bottom:u.outerHeight(!0)+d>p?0:"auto"}),u.on("mouseleave",function(){n(e),u.remove()}),u}function i(){$(".dropdown-backdrop").remove(),$(".sidebar-subnav.nav-floating").remove(),$(".sidebar li.open").removeClass("open")}var s,c,l=$(t),u=$("body"),d=e.$state.current.name;return{restrict:"EA",template:'<nav class="sidebar" ng-transclude></nav>',transclude:!0,replace:!0,link:function(t,n,p){s=t,c=n;var m=r.isTouch()?"click":"mouseenter",g=$();c.on(m,".nav > li",function(){(r.isSidebarCollapsed()||e.app.layout.asideHover)&&(g.trigger("mouseleave"),g=a($(this)),o())}),t.$on("closeSidebarMenu",function(){i()}),l.on("resize",function(){r.isMobile()||u.removeClass("aside-toggled")}),e.$on("$stateChangeStart",function(t,r,o,n,a){d=r.name,$("body.aside-toggled").removeClass("aside-toggled"),e.$broadcast("closeSidebarMenu")}),angular.isDefined(p.sidebarAnyclickClose)&&$(".wrapper").on("click.sidebar",function(e){u.hasClass("aside-toggled")&&($(e.target).parents(".aside").length||u.removeClass("aside-toggled"))})}}}]),App.directive("skycon",function(){return{restrict:"A",link:function(e,t,r){var o=new Skycons({color:r.color||"white"});t.html('<canvas width="'+r.width+'" height="'+r.height+'"></canvas>'),o.add(t.children()[0],r.skycon),o.play()}}}),App.directive("sparkline",["$timeout","$window",function(e,t){"use strict";function r(e){var t=e.data();t.type=t.type||"bar",t.disableHiddenCheck=!0,e.sparkline("html",t),t.resize&&$(window).resize(function(){e.sparkline("html",t)})}return{restrict:"EA",controller:["$scope","$element",function(t,o){var n=function(){r(o)};e(n)}]}}]),App.directive("checkAll",function(){"use strict";return{restrict:"A",controller:["$scope","$element",function(e,t){t.on("change",function(){var e=$(this),t=e.index()+1,r=e.find('input[type="checkbox"]'),o=e.parents("table");o.find("tbody > tr > td:nth-child("+t+') input[type="checkbox"]').prop("checked",r[0].checked)})}]}}),App.directive("tagsinput",["$timeout",function(e){return{restrict:"A",require:"ngModel",link:function(t,r,o,n){r.on("itemAdded itemRemoved",function(){n.$viewValue&&n.$viewValue.split&&(n.$setViewValue(n.$viewValue.split(",")),n.$render())}),e(function(){r.tagsinput()})}}}]),App.directive("toggleState",["toggleStateService",function(e){"use strict";return{restrict:"A",link:function(t,r,o){var n=$("body");$(r).on("click",function(t){t.preventDefault();var r=o.toggleState;r&&(n.hasClass(r)?(n.removeClass(r),o.noPersist||e.removeState(r)):(n.addClass(r),o.noPersist||e.addState(r)))})}}}]),App.directive("validateForm",function(){return{restrict:"A",controller:["$scope","$element",function(e,t){var r=$(t);$.fn.parsley&&r.parsley()}]}}),App.directive("vectorMap",["vectorMap",function(e){"use strict";var t={markerColor:"#23b7e5",bgColor:"transparent",scaleColors:["#878c9a"],regionFill:"#bbbec6"};return{restrict:"EA",link:function(r,o,n){var a=n.height||"300",i={markerColor:n.markerColor||t.markerColor,bgColor:n.bgColor||t.bgColor,scale:n.scale||1,scaleColors:n.scaleColors||t.scaleColors,regionFill:n.regionFill||t.regionFill,mapName:n.mapName||"world_mill_en"};o.css("height",a),e.init(o,i,r.seriesData,r.markersData)}}}]),App.service("browser",function(){"use strict";var e,t,r=function(e){e=e.toLowerCase();var t=/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],r=/(ipad)/.exec(e)||/(iphone)/.exec(e)||/(android)/.exec(e)||/(windows phone)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/i.exec(e)||[];return{browser:t[3]||t[1]||"",version:t[2]||"0",platform:r[0]||""}};if(e=r(window.navigator.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version,t.versionNumber=parseInt(e.version)),e.platform&&(t[e.platform]=!0),(t.android||t.ipad||t.iphone||t["windows phone"])&&(t.mobile=!0),(t.cros||t.mac||t.linux||t.win)&&(t.desktop=!0),(t.chrome||t.opr||t.safari)&&(t.webkit=!0),t.rv){var o="msie";e.browser=o,t[o]=!0}if(t.opr){var n="opera";e.browser=n,t[n]=!0}if(t.safari&&t.android){var a="android";e.browser=a,t[a]=!0}return t.name=e.browser,t.platform=e.platform,t}),App.factory("colors",["APP_COLORS",function(e){return{byName:function(t){return e[t]||"#fff"}}}]),App.service("navSearch",function(){var e="form.navbar-form";return{toggle:function(){var t=$(e);t.toggleClass("open");var r=t.hasClass("open");t.find("input")[r?"focus":"blur"]()},dismiss:function(){$(e).removeClass("open").find('input[type="text"]').blur().val("")}}}),App.provider("RouteHelpers",["APP_REQUIRES",function(e){"use strict";this.basepath=function(e){return"app/views/"+e},this.resolveFor=function(){var t=arguments;return{deps:["$ocLazyLoad","$q",function(r,o){function n(e){return i.then("function"==typeof e?e:function(){var t=a(e);return t?r.load(t):$.error("Route resolve: Bad resource name ["+e+"]")})}function a(t){if(e.modules)for(var r in e.modules)if(e.modules[r].name&&e.modules[r].name===t)return e.modules[r];return e.scripts&&e.scripts[t]}for(var i=o.when(1),s=0,c=t.length;c>s;s++)i=n(t[s]);return i}]}},this.$get=function(){}}]),App.service("toggleStateService",["$rootScope",function(e){var t="toggleState",r={hasWord:function(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e)},addWord:function(e,t){return this.hasWord(e,t)?void 0:e+(e?" ":"")+t},removeWord:function(e,t){return this.hasWord(e,t)?e.replace(new RegExp("(^|\\s)*"+t+"(\\s|$)*","g"),""):void 0}};return{addState:function(o){var n=angular.fromJson(e.$storage[t]);n=n?r.addWord(n,o):o,e.$storage[t]=angular.toJson(n)},removeState:function(o){var n=e.$storage[t];n&&(n=r.removeWord(n,o),e.$storage[t]=angular.toJson(n))},restoreState:function(r){var o=angular.fromJson(e.$storage[t]);o&&r.addClass(o)}}}]),App.service("Utils",["$window","APP_MEDIAQUERY",function(e,t){"use strict";var r=angular.element("html"),o=angular.element(e),n=angular.element("body");return{support:{transition:function(){var e=function(){var e,t=document.body||document.documentElement,r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in r)if(void 0!==t.style[e])return r[e]}();return e&&{end:e}}(),animation:function(){var e=function(){var e,t=document.body||document.documentElement,r={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(e in r)if(void 0!==t.style[e])return r[e]}();return e&&{end:e}}(),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},touch:"ontouchstart"in window&&navigator.userAgent.toLowerCase().match(/mobile|tablet/)||window.DocumentTouch&&document instanceof window.DocumentTouch||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0||!1,mutationobserver:window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||null},isInView:function(e,t){var r=$(e);if(!r.is(":visible"))return!1;var n=o.scrollLeft(),a=o.scrollTop(),i=r.offset(),s=i.left,c=i.top;return t=$.extend({topoffset:0,leftoffset:0},t),c+r.height()>=a&&c-t.topoffset<=a+o.height()&&s+r.width()>=n&&s-t.leftoffset<=n+o.width()?!0:!1},langdirection:"rtl"==r.attr("dir")?"right":"left",isTouch:function(){return r.hasClass("touch")},isSidebarCollapsed:function(){return n.hasClass("aside-collapsed")},isSidebarToggled:function(){return n.hasClass("aside-toggled")},isMobile:function(){return o.width()<t.tablet}}}]);var myApp=angular.module("SLP_WebApp",["angle","ngDialog"]);myApp.run(["$log","$rootScope","$state","$stateParams",function(e,t,r,o){t.$state=r,t.$stateParams=o}]),myApp.config(["$stateProvider",function(e){e.state("app.home-search",{url:"/homeSearch",title:"Search",templateUrl:getMyBasepath("home-search.html"),controller:"HomeSearchController",controllerAs:"HomeSearchCtrl"}).state("app.articles-results",{url:"/articles",title:"Articles",templateUrl:getMyBasepath("articles-results.html"),controller:"ArticlesResultsController",controllerAs:"ArticlesResultsCtrl"})}]),myApp.controller("ArticlesResultsController",["$rootScope","ngDialog","ArticleManagerService","FiltersManagerService","RequestArticlesService","StatesManagerService","$scope","$timeout",function(e,t,r,o,n,a,i,s){var c=this;c.articles=r.getArticles(),c.resultsStates=r.getResultsStates(),c.publicationYearFil=o.getStartingPublicationYearF(),c.orderByFil=o.getOrderBy(),c.sortFil=o.getSort(),c.onlySelfcitationsFil=o.getOnlySelfCitationsF(),c.characterizationsFil=o.getCharacterizationsF(),c.authorsFil=o.getAuthorsF(),c.isRequestPending=n.isRequestPending(),c.isRetrievingArticlesInfo=r.isRetrievingArticlesInfo(),c.articlesNum={value:c.articles.length},c.completedArticles={value:0},c.completedPercent={value:0},c.states=a.getStates(),c.currentState="Results";var l;c.publicationYear="publicationYear",c.title="title",c.globalCitations="globalCountValue",c.totCitActs="totCitActs",c.orderByV=c.publicationYear,c.sortByV=!0,c.isRequestPending||r.getArticlesResultsState()!=c.resultsStates.NOT_AVAILABLE||t.open({template:"app/templates/dialog-empty-results.html",controller:function(e,r){r.goToHomeSearch=function(){e.$state.go("app.home-search"),t.close()}}}),c.getSearchText=function(){return n.getSearchString()},c.restoreArticles=function(e,t){t||r.setArticlesResults(e)},i.$watchCollection(function(){return c.articles},function(){c.articlesNum.value=r.getArticlesNum()},!0),i.$watch(n.isRequestPending,function(){c.isRequestPending=n.isRequestPending(),c.isRequestPending?l=t.open({template:"app/templates/dialog-retrieving-results.html",closeByEscape:!1,showClose:!1,closeByDocument:!1}):(c.articlesNum.value=r.getArticlesNum(),l&&s(l.close,500),r.getArticlesResultsState()==c.resultsStates.NO_RESULTS&&(c.articlesNum.value=0,t.open({template:"app/templates/dialog-no-results.html",closeByEscape:!0,showClose:!0,closeByDocument:!0,controller:function(e,r){r.goToHomeSearch=function(){e.$state.go("app.home-search"),t.close()}}})),r.getArticlesResultsState()==c.resultsStates.RESULTS&&(c.articlesNum.value=r.getArticlesNum()))}),i.$watch(r.isRetrievingArticlesInfo,function(){c.isRetrievingArticlesInfo=r.isRetrievingArticlesInfo(),c.articlesNum.value=r.getArticlesNum(),c.isRetrievingArticlesInfo}),i.$watch(r.getCompletedArticles,function(){c.completedArticles.value=r.getCompletedArticles(),c.completedPercent.value=c.completedArticles.value/c.articlesNum.value*100}),i.$watchCollection(a.getStates,function(){},!0),c.logResults=function(){console.log(c.articles)}}]),myApp.controller("CitationDetailsDialogController",["$scope","$rootScope",function(e,t){var r=t.colorsMap,o=function(e,t,r){var o,n=0;for(var a in r)o=r[a],o.citingPubYear==e&&o.color==t&&n++;return n},n=function(e,t,r){for(var n,a=[],i=0;i<e.length;i++){n=e[i];var s={label:n,y:o(n,t,r)};a.push(s)}return a},a=function(e){var t,r=[],o=[],n="";for(var a in e)r.push(e[a].color);r.sort();for(var s=0;s<r.length;s++)t=r[s],t!==n?o.push({indexLabel:t,y:1,toolTipContent:"{indexLabel}: {y}",color:i(t)}):o[o.length-1].y++,n=t;return o},i=function(e){for(key in r)if(r[key].toString===e)return r[key].color},s=function(e){var t,r=[],o=[],a="";for(var s in e)o.push(e[s].color);o.sort();for(var c=0;c<o.length;c++)t=o[c],t!==a&&r.push(t),a=t;var l,u=[],d=[],p=0;for(var s in e)d.push(e[s].citingPubYear);d.sort(function(e,t){return e-t});for(var c=0;c<d.length;c++)l=d[c],l!==p&&u.push(l),p=l;var m=[];for(var s in r){var g={type:"stackedColumn",name:r[s],showInLegend:!0,dataPoints:n(u,r[s],e),color:i(r[s])};m.push(g)}return m},c=function(e){var t=s(e);t.push({});var r=new CanvasJS.Chart("stacked_chart",{axisY:{title:"cit"},toolTip:{shared:"true"},legend:{fontSize:20,fontFamily:"sans-serif"},animationEnabled:!0,animationDuration:2e3,data:t});r.render()},l=function(e){var t=a(e),r=new CanvasJS.Chart("donut_chart",{animationEnabled:!0,animationDuration:2e3,data:[{type:"doughnut",startAngle:-90,indexLabelFontSize:15,dataPoints:t}]});r.render()};e.$on("ngDialog.opened",function(){l(e.ngDialogData.articleData.citationsInfo),c(e.ngDialogData.articleData.citationsInfo)})}]),myApp.controller("BiblioFiltersController",["FiltersManagerService","$scope","$rootScope",function(e,t,r){var o=this;o.publicationYearF=e.getStartingPublicationYearF(),o.onlySelfcitationsF=e.getOnlySelfCitationsF(),o.characterizationsF=e.getCharacterizationsF(),o.authorsF=e.getAuthorsF(),o.allAuthors=r.authors,o.selectedAuthor="",o.authorAlreadyInList=!1,o.inputNotValid=!1;var n=new Date;o.year=n.getFullYear(),o.publicationYearV=o.publicationYearF.value,o.onlySelfcitationsV=o.onlySelfcitationsF.value,o.characterizationsV=o.characterizationsF.value,o.authorsV=o.authorsF.value,o.checkYear=!1,o.checkOnlySelfcitations=!1,o.checkCharacterizations=!1,o.checkAuthors=!1,o.setColorsAllChecked=function(e){for(var t in o.characterizationsV)o.characterizationsV[t].checked=e},o.switchColorsFilter=function(){o.checkCharacterizations||o.setColorsAllChecked(!0),e.setCharacterizations(o.characterizationsV),e.setFilterActivated(o.checkCheckboxes())},o.switchYearFilter=function(){o.checkYear||(o.publicationYearV=0,e.setStartingPublicationYear(o.publicationYearV)),e.setFilterActivated(o.checkCheckboxes())},o.switchOnlySelfcitations=function(){o.onlySelfcitationsV=o.checkOnlySelfcitations?!0:!1,e.setOnlySelfCitations(o.onlySelfcitationsV),e.setFilterActivated(o.checkCheckboxes())},o.switchAuthors=function(){e.setAuthorsEnabled(o.checkAuthors?!0:!1),e.setFilterActivated(o.checkCheckboxes())},o.checkCheckboxes=function(){return o.checkYear||o.checkOnlySelfcitations||o.checkCharacterizations||o.checkAuthors?!0:!1},o.applyYearFilter=function(){e.setStartingPublicationYear(o.publicationYearV)},o.updateAuthorFilter=function(){a(o.selectedAuthor)?(o.authorAlreadyInList=!0,console.log("autore già in lista")):i(o.selectedAuthor)?(o.inputNotValid=!1,o.authorAlreadyInList=!1,o.authorsV.push(o.selectedAuthor),e.setAuthors(o.authorsV)):(o.inputNotValid=!0,console.log("input non valido"))},o.removeAuthorFromFilter=function(t){for(var r in o.authorsV)o.authorsV[r]==t&&o.authorsV.splice(r,1);e.setAuthors(o.authorsV)};var a=function(e){for(var t in o.authorsV)if(o.authorsV[t]==e)return!0;return!1},i=function(e){return angular.isDefined(e)&&""!=e}}]),myApp.controller("HomeSearchController",["$rootScope","RequestArticlesService","ArticleManagerService","ArticlesInfoService",function(e,t,r,o){var n=this,a=0,i=1,s=2,c=a;n.authors=[],n.searchText="",n.searchTitle="",n.searchAuthor="";n.searchForArticles=function(){switch(t.setSearchString(n.searchText),c){case a:n.searchText&&r.getArticlesByAbstract(n.searchText);break;case i:n.searchTitle&&r.getArticlesByTitle(n.searchTitle);break;case s:n.searchAuthor&&r.getArticlesByFullNameAuthor(n.searchAuthor)}e.$state.go("app.articles-results")},n.switchSearch=function(e){switch(e){case 0:c=a;break;case 1:c=i;break;case 2:c=s}},n.refreshAuthors=function(t){n.authors.length=0;for(key in e.authors)e.authors[key].toUpperCase().startsWith(t.toUpperCase())&&n.authors.push(e.authors[key])}}]),myApp.controller("BiblioOrderbyController",["FiltersManagerService",function(e){var t=this;t.orderByF=e.getOrderBy(),t.sortF=e.getSort(),t.orderByV=t.orderByF.value,t.sortV=t.sortF.value,t.publicationYear="publicationYear",t.title="title",t.globalCitations="globalCountValue",t.totCitActs="totCitActs",t.applySort=function(){e.setSort(t.sortV)},t.applyOrderBy=function(){e.setOrderBy(t.orderByV)}}]),myApp.controller("RightNavbarController",["FiltersManagerService",function(e){var t=this;t.filterActivatedF=e.getFilterActivated()}]),myApp.directive("articleItem",["ngDialog","ArticleManagerService",function(e,t){"use strict";return{restrict:"E",templateUrl:"app/templates/article-item.html",scope:{articleData:"=",articleIndex:"@",yearFilter:"=",orderFilter:"=",sortFilter:"=",onlySelfcitationFilter:"=",characterizationsFilter:"=",authorsFilter:"="},link:function(r,o,n){r.articleIsCollapsed=!0;var a=!1;r.toggleArticleDetails=function(e,o){r.articleIsCollapsed=!r.articleIsCollapsed,r.articleIsCollapsed||a||(a=!a,t.getCitationsInfo(e,o),t.getBiblioInfo(e,o))},r.availableIssue=function(e){return e.hasOwnProperty("issueNumber")&&e.hasOwnProperty("volumeNumber")},r.showCitDetails=function(){e.open({template:"app/templates/dialog-citations-details.html",controller:"CitationDetailsDialogController",className:"ngdialog-theme-default-custom",data:{articleData:r.articleData,citDonutChartId:"donut_chart",citStackedChartId:"stackedColumn_chart"}})},r.exploreAuthor=function(e,r){t.getArticlesByAuthor(e,r)}}}}]),myApp.directive("biblioItem",["$modal","ArticleManagerService","$rootScope",function(e,t,r){"use strict";return{restrict:"E",templateUrl:"app/templates/biblio-item.html",scope:{chartId:"@",itemData:"=",citingArticleAuthors:"="},link:function(o,n,a){var i=r.colorsMap;o.exploreBiblioItem=function(){var e="["+o.itemData.publicationYear+"] "+o.itemData.title.substr(0,40)+"...";t.singleArticleInfo(o.itemData.articleExpression.value,e)},o.exploreAuthor=function(e,r){t.getArticlesByAuthor(e,r)},o.isSharedAuthor=function(e){for(var t in o.citingArticleAuthors)if(o.citingArticleAuthors[t].fullName===e.fullName)return!0;return!1};var s=function(e,t){var r=[];for(var o in e)r.push({y:e[o].numCitActs,indexLabel:e[o].color,toolTipContent:"{indexLabel}: {y}",color:i[e[o].colorURI].color});return r};o.renderChart=function(e,t){var r=s(e,t),o=new CanvasJS.Chart(a.chartId,{animationEnabled:!0,animationDuration:1e3,data:[{type:"doughnut",startAngle:-90,indexLabelFontSize:12,dataPoints:r}]});o.render()},o.openAbstractDialog=function(){e.open({templateUrl:"/app/templates/dialog-abstract.html",controller:c,size:"lg"})},o.openMotivationsDialog=function(){e.open({templateUrl:"/app/templates/dialog-motivations.html",controller:l,size:"lg"})};var c=function(e,t){e.close=function(){t.close("closed")},e.absText=o.itemData.abstractTxt.value,e.title=o.itemData.title};c.$inject=["$scope","$modalInstance"];var l=function(e,t){e.close=function(){t.close("closed")},e.citActsInfo=o.itemData.citActsInfo,e.title=o.itemData.title};l.$inject=["$scope","$modalInstance"]}}}]),myApp.directive("citingItem",["ngDialog","ArticleManagerService",function(e,t){"use strict";return{restrict:"E",templateUrl:"app/templates/citing-item.html",scope:{itemData:"=",citedArticleAuthors:"="},link:function(r,o,n){r.emphasizeInTxtRefPointer=function(e,t){return e},r.exploreCitingItem=function(){e.closeAll();var o="["+r.itemData.publicationYear+"] "+r.itemData.title.value.substr(0,40)+"...";t.singleArticleInfo(r.itemData.articleExpression.value,o)},r.exploreAuthor=function(r,o){e.closeAll(),t.getArticlesByAuthor(r,o)},r.isSharedAuthor=function(e){for(var t in r.citedArticleAuthors)if(r.citedArticleAuthors[t].fullName===e.fullName)return!0;return!1}}}}]),myApp.filter("afterYear",function(){return function(e,t){if(!angular.isUndefined(e)&&!angular.isUndefined(t)&&angular.isArray(e)){for(var r,o=[],n=0;n<e.length;n++)r=e[n],r.publicationYear>=t&&o.push(r);return o}return e}}).filter("onlySelfcitation",function(){return function(e,t){if(0==t)return e;if(!angular.isUndefined(e)&&!angular.isUndefined(t)){for(var r,o=[],n=0;n<e.length;n++)r=e[n],1==r.isSelfcitation&&o.push(r);return o}return e}}).filter("characterizations",function(){return function(e,t){if(!angular.isUndefined(e)&&!angular.isUndefined(t)){var r,o,n=[];for(var a in e)if(r=e[a],o=r.citActsInfo,!angular.isUndefined(o)&&o.length>0){for(var i in o)if(1==t[o[i].colorURI].checked){n.push(r);break}}else n.push(r);return n}return e}}).filter("authors",function(){return function(e,t,r){if(!angular.isUndefined(e)&&!angular.isUndefined(t)&&r){var o,n,a=[];for(var i in e){o=e[i],n=o.authors;for(var s in n)if(t.indexOf(n[s].fullName)>-1){a.push(o);break}}return a}return e}}),myApp.factory("ArticleManagerService",["RequestArticlesService","FiltersManagerService","ArticlesInfoService","StatesManagerService","AuthorInfoService","ngDialog","$rootScope","$interval",function(e,t,r,o,n,a,i,s){var c=[],l=i.colorsMap,u=!1,d=0,p=c.length,m={NOT_AVAILABLE:0,RESULTS:1,NO_RESULTS:2},g=m.NOT_AVAILABLE,f=function(e){return angular.isString(e)?parseInt(e):e},h=function(e){var t=0;for(var r in e)t+=e[r].numCitActs;return t},v=function(e){return l[e].toString},A=function(e){var t=[];for(var r in e)e[r].colorURI=e[r].color.value,
e[r].color=v(e[r].color.value);e.sort(function(e,t){return e.color<t.color?-1:e.color>t.color?1:0});for(var o,n={color:""},a=0;a<e.length;a++){var o=e[a];o.color!==n.color?t.push({colorURI:o.colorURI,color:o.color,numCitActs:1,inTextRefPointers:[{irpTxt:o.irpTxt.value,sentenceTxt:o.sentenceTxt.value}]}):(t[t.length-1].numCitActs++,t[t.length-1].inTextRefPointers.push({irpTxt:o.irpTxt.value,sentenceTxt:o.sentenceTxt.value})),n=o}return t},b=function(e,t){r.getCitationActsInfoNotGrouped(e,t.citedExpression.value).then(function(e){var r=e.data.results.bindings;t.citActsInfo=A(r),t.totCitActs=h(t.citActsInfo)},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},S=function(e,t,r){return""==e.data||!e.data[t][r]},y=function(e,t){if(void 0!==t&&void 0!==e.authors){e.sharedAuthors=[],e.isSelfcitation=!1;var r;for(var o in e.authors){r=e.authors[o];for(var n in t)t[n].fullName===r.fullName&&(e.isSelfcitation=!0,e.sharedAuthors.push(r.fullName))}}else alert("Non è stato possibile stabilire se '"+e.title+"' sia una autocitazione")},C=function(e){r.getArticleAuthors(e.authorsList.value).then(function(t){e.authors=t.data.results.bindings;for(var r in e.authors)e.authors[r].fullName=e.authors[r].fullName.value},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},w=function(e,t,o){r.getArticleAuthors(e.authorsList.value).then(function(r){e.authors=r.data.results.bindings;for(var o in e.authors)e.authors[o].fullName=e.authors[o].fullName.value;y(e,t)},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},$=function(e,t,r){var o=[];for(var n in r)r[n].citingExp.value==t&&r[n].color==e&&o.push({irpTxt:r[n].irpTxt,sentenceTxt:r[n].sentenceTxt});return o},k=function(e,t){e.motivations=[];var r,o=[],n="";for(var a in t)t[a].citingExp.value==e.citingExp.value&&o.push(t[a].color);o.sort();for(var i=0;i<o.length;i++)r=o[i],r!==n&&e.motivations.push({colorStr:r,inTextRefPointers:$(r,e.citingExp.value,t)}),n=r},I=function(e,t,o,n){return r.requestCitingArticles(t).then(function(t){e.citingArticles=t.data.results.bindings;for(var r in e.citingArticles){var a=e.citingArticles[r];a.publicationYear=parseInt(a.publicationYear.value),w(a,o,!1),k(a,n)}},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},R=function(e){return r.getArticle(e).then(function(e){var t=e.data.results.bindings[0];c.length=0,t.publicationYear=f(t.publicationYear.value),t.title=t.title.value,t.globalCountValue=f(t.globalCountValue.value),c.push(t),d=1,p=1,C(t),r.getArticleCitationsInfo(t.expression.value).then(function(e){t.inCitActs=e.data.results.bindings[0].numCitActs.value,t.inNumCites=e.data.results.bindings[0].numCites.value},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},F=function(e){r.getArticleGeneralInfo(e).then(function(e){var t=e.data.results.bindings[0];t.publicationYear=f(t.publicationYear.value),t.title=t.title.value,t.globalCountValue=f(t.globalCountValue.value),C(t),r.getArticleCitationsInfo(t.expression.value).then(function(e){t.inCitActs=e.data.results.bindings[0].numCitActs.value,t.inNumCites=e.data.results.bindings[0].numCites.value},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)}),c.push(t)},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},T=function(){a.open({template:"app/templates/dialog-error.html",controller:function(e,t){}})};return{getArticles:function(){return c},getColorsMap:function(){return l},isRetrievingArticlesInfo:function(){return u},setCompletedRetrievingArticlesInfo:function(){u=!1},getArticlesNum:function(){return d},getCompletedArticles:function(){return p=c.length},getResultsStates:function(){return m},getArticlesResultsState:function(){return g},getCitationsInfo:function(e,t){return r.requestCitationsInfo(e).then(function(r){var o=r.data.results.bindings;for(var n in o)o[n].color=l[o[n].color.value].toString,o[n].citingPubYear=parseInt(o[n].citingPubYear.value),o[n].irpTxt=o[n].irpTxt.value,o[n].sentenceTxt=o[n].sentenceTxt.value;for(var a in c){var i=c[a];if(i.expression.value==e){i.citationsInfo=o,I(i,e,t,o);break}}},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},getBiblioInfo:function(e,t){r.requestBiblioInfo(e).then(function(r){var o=r.data.results.bindings;for(var n in o)o[n].title=o[n].title.value,o[n].publicationYear=f(o[n].publicationYear.value),o[n].globalCountDate=o[n].globalCountDate.value,o[n].globalCountValue=f(o[n].globalCountValue.value),w(o[n],t,!0),b(e,o[n]);for(var a in c){var i=c[a];if(i.expression.value==e){i.biblioInfo=o;break}}},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},getArticlesByAbstract:function(t){return e.searchArticles(t).then(function(r){o.removeAllStates(),o.addEmptyState("Abstract :'"+t+"'"),c.length=0;var n="http://stanbol.apache.org/ontology/entityhub/query#QueryResultSet",a="http://stanbol.apache.org/ontology/entityhub/query#queryResult",i=null;if(S(r,n,a))g=m.NO_RESULTS,console.log("NO RESULTS!"),i=[],e.setCompletedRequest();else{g=m.RESULTS,i=r.data[n][a],d=i.length,p=c.length,e.setCompletedRequest(),u=!0;for(var s in i)F(i[s].value),c.length==i.length&&(u=!1)}},function(t){e.setCompletedRequest(),T()})},singleArticleInfo:function(e,t){var r=angular.copy(c);o.saveCurrentStateArticles(r),o.addEmptyState(t),R(e)},setArticlesResults:function(e){var t=o.restoreState(e);angular.copy(t.articles,c),d=c.length,p=c.length},getArticlesByTitle:function(t){return e.setPendingRequest(),r.requestArticlesByTitle(t).then(function(r){o.removeAllStates(),o.addEmptyState("Title: '"+t+"'"),c.length=0;var n=null;if(0==r.data.results.bindings.length)g=m.NO_RESULTS,console.log("NO RESULTS!"),n=[],e.setCompletedRequest();else{g=m.RESULTS;var a=r.data.results.bindings;n=r.data.results.bindings,d=a.length,p=c.length,e.setCompletedRequest();for(var i in n)F(n[i].work.value),c.length==n.length&&(u=!1)}},function(t){e.setCompletedRequest(),T()})},getArticlesByAuthor:function(e,t){n.requestAuthorArticles(t,e).then(function(r){var n=angular.copy(c);o.saveCurrentStateArticles(n),o.addEmptyState("Author: "+e+" "+t),c.length=0;var a=r.data.results.bindings;d=a.length,p=c.length,u=!0;for(var i in a)F(a[i].work.value),c.length==a.length&&(u=!1)},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},getArticlesByFullNameAuthor:function(t){return e.setPendingRequest(),n.requestFullNameAuthorArticles(t).then(function(r){o.removeAllStates(),o.addEmptyState("Author: '"+t+"'"),c.length=0;var n=null;if(0==r.data.results.bindings.length)g=m.NO_RESULTS,console.log("NO RESULTS!"),n=[],e.setCompletedRequest();else{g=m.RESULTS,n=r.data.results.bindings,d=n.length,p=c.length,e.setCompletedRequest(),u=!0;for(var a in n)F(n[a].work.value),c.length==n.length&&(u=!1)}},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})}}}]),myApp.factory("FiltersManagerService",["ArticlesInfoService","ngDialog",function(e,t){var r,o={value:!1},n={value:0},a={value:!1},i={value:{"http://purl.org/spar/cito/citesForInformation":{toString:"cites For Information",valueURI:"http://purl.org/spar/cito/citesForInformation",checked:!0},"http://purl.org/spar/cito/citesAsMetadataDocument":{toString:"cites As Metadata Document",valueURI:"http://purl.org/spar/cito/citesAsMetadataDocument",checked:!0},"http://purl.org/spar/cito/citesAsDataSource":{toString:"cites As Data Source",valueURI:"http://purl.org/spar/cito/citesAsDataSource",checked:!0},"http://purl.org/spar/cito/citesAsAuthority":{toString:"cites As Authority",valueURI:"http://purl.org/spar/cito/citesAsAuthority",checked:!0},"http://purl.org/spar/cito/obtainsSupportFrom":{toString:"obtains Support From",valueURI:"http://purl.org/spar/cito/obtainsSupportFrom",checked:!0},"http://purl.org/spar/cito/includesExcerptFrom":{toString:"includes Excerpt From",valueURI:"http://purl.org/spar/cito/includesExcerptFrom",checked:!0},"http://purl.org/spar/cito/confirms":{toString:"confirms",valueURI:"http://purl.org/spar/cito/confirms",checked:!0},"http://purl.org/spar/cito/containsAssertionFrom":{toString:"contains Assertion From",valueURI:"http://purl.org/spar/cito/containsAssertionFrom",checked:!0},"http://purl.org/spar/cito/derides":{toString:"derides",valueURI:"http://purl.org/spar/cito/derides",checked:!0},"http://purl.org/spar/cito/includesQuotationFrom":{toString:"includes Quotation From",valueURI:"http://purl.org/spar/cito/includesQuotationFrom",checked:!0},"http://purl.org/spar/cito/citesAsRelated":{toString:"cites As Related",valueURI:"http://purl.org/spar/cito/citesAsRelated",checked:!0},"http://purl.org/spar/cito/usesMethodIn":{toString:"uses Method In",valueURI:"http://purl.org/spar/cito/usesMethodIn",checked:!0},"http://purl.org/spar/cito/documents":{toString:"documents",valueURI:"http://purl.org/spar/cito/documents",checked:!0},"http://purl.org/spar/cito/describes":{toString:"describes",valueURI:"http://purl.org/spar/cito/describes",checked:!0},"http://purl.org/spar/cito/usesConclusionsFrom":{toString:"uses Conclusions From",valueURI:"http://purl.org/spar/cito/usesConclusionsFrom",checked:!0},"http://purl.org/spar/cito/repliesTo":{toString:"replies To",valueURI:"http://purl.org/spar/cito/repliesTo",checked:!0},"http://purl.org/spar/cito/qualifies":{toString:"qualifies",valueURI:"http://purl.org/spar/cito/qualifies",checked:!0},"http://purl.org/spar/cito/corrects":{toString:"corrects",valueURI:"http://purl.org/spar/cito/corrects",checked:!0},"http://purl.org/spar/cito/agreesWith":{toString:"agrees With",valueURI:"http://purl.org/spar/cito/agreesWith",checked:!0},"http://purl.org/spar/cito/citesAsEvidence":{toString:"cites As Evidence",valueURI:"http://purl.org/spar/cito/citesAsEvidence",checked:!0},"http://purl.org/spar/cito/usesDataFrom":{toString:"uses Data From",valueURI:"http://purl.org/spar/cito/usesDataFrom",checked:!0},"http://purl.org/spar/cito/parodies":{toString:"parodies",valueURI:"http://purl.org/spar/cito/parodies",checked:!0},"http://purl.org/spar/cito/critiques":{toString:"critiques",valueURI:"http://purl.org/spar/cito/critiques",checked:!0},"http://purl.org/spar/cito/compiles":{toString:"compiles",valueURI:"http://purl.org/spar/cito/compiles",checked:!0},"http://purl.org/spar/cito/speculatesOn":{toString:"speculates On",valueURI:"http://purl.org/spar/cito/speculatesOn",checked:!0},"http://purl.org/spar/cito/extends":{toString:"extends",valueURI:"http://purl.org/spar/cito/extends",checked:!0},"http://purl.org/spar/cito/citesAsSourceDocument":{toString:"cites As Source Document",valueURI:"http://purl.org/spar/cito/citesAsSourceDocument",checked:!0},"http://purl.org/spar/cito/updates":{toString:"updates",valueURI:"http://purl.org/spar/cito/updates",checked:!0},"http://purl.org/spar/cito/discusses":{toString:"discusses",valueURI:"http://purl.org/spar/cito/discusses",checked:!0},"http://purl.org/spar/cito/citesAsPotentialSolution":{toString:"cites As Potential Solution",valueURI:"http://purl.org/spar/cito/citesAsPotentialSolution",checked:!0},"http://purl.org/spar/cito/obtainsBackgroundFrom":{toString:"obtains Background From",valueURI:"http://purl.org/spar/cito/obtainsBackgroundFrom",checked:!0},"http://purl.org/spar/cito/reviews":{toString:"reviews",valueURI:"http://purl.org/spar/cito/reviews",checked:!0},"http://purl.org/spar/cito/supports":{toString:"supports",valueURI:"http://purl.org/spar/cito/supports",checked:!0},"http://purl.org/spar/cito/citesAsRecommendedReading":{toString:"cites As Recommended Reading",valueURI:"http://purl.org/spar/cito/citesAsRecommendedReading",checked:!0},"http://purl.org/spar/cito/credits":{toString:"credits",valueURI:"http://purl.org/spar/cito/credits",checked:!0},"http://purl.org/spar/cito/disagreesWith":{toString:"disagrees With",valueURI:"http://purl.org/spar/cito/disagreesWith",checked:!0},"http://purl.org/spar/cito/plagiarizes":{toString:"plagiarizes",valueURI:"http://purl.org/spar/cito/plagiarizes",checked:!0}}},s={value:[],enabled:!1},r={value:[]},c="publicationYear",l=!0,u={value:c},d={value:l},p=function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0};return{getFilterActivated:function(){return o},setFilterActivated:function(e){o.value=e},getStartingPublicationYearF:function(){return n},setStartingPublicationYear:function(e){n.value=e},getAuthorsF:function(){return s},setAuthors:function(e){s.value=e},setAuthorsEnabled:function(e){s.enabled=e},getAllArticlesAuthors:function(){return p(r.value)&&e.getAllAuthors().then(function(e){var t=e.data.results.bindings;for(var o in t)r.value.push(t[o].fullName.value)},function(e){t.open({template:"app/templates/dialog-error.html"}),console.error("Error while fetching authors. "+e.status+": "+e.statusText)}),r},getOnlySelfCitationsF:function(){return a},setOnlySelfCitations:function(e){a.value=e},getCharacterizationsF:function(){return i},setCharacterizations:function(e){i=e},getOrderBy:function(){return u},setOrderBy:function(e){u.value=e},getSort:function(){return d},setSort:function(e){d.value=e},restoreDefaultOrderBy:function(){}}}]),myApp.factory("ArticlesInfoService",["$http","$interpolate",function(e,t){var r="http://two.eelst.cs.unibo.it:8181/data/query",o=$("#prefixes").text(),n=function(e,n){var a=$(e).text(),i=o+t(a)(n),s=encodeURIComponent(i);return r+"?format=json&query="+s};return{getArticleGeneralInfo:function(t){var r={work:t},o=n("#query_articleInfo",r);return e.get(o)},requestCitationsInfo:function(t){var r={citedExpression:t},o=n("#query_citationsInfo",r);return e.get(o)},requestCitingArticles:function(t){var r={citedExpression:t},o=n("#query_citingArticles",r);return e.get(o)},getArticleAuthors:function(t){var r={authorsList:t},o=n("#query_articleAuthors",r);return e.get(o)},getArticleCitationsInfo:function(t){var r={expression:t},o=n("#query_incomingCitationsActs",r);return e.get(o)},requestBiblioInfo:function(t){var r={expression:t},o=n("#query_citedArticles",r);return e.get(o)},getCitationActsInfo:function(t,r){var o={artExpression:t,citedExpression:r},a=n("#query_citationActsInfo",o);return e.get(a)},getCitationActsInfoNotGrouped:function(t,r){var o={artExpression:t,citedExpression:r},a=n("#query_citationActsInfoNotGrouped",o);return e.get(a)},getAllAuthors:function(){var t=$("#query_allAuthors").text(),n=o+t,a=encodeURIComponent(n);return e.get(r+"?format=json&query="+a)},getArticle:function(t){var r={expression:t},o=n("#query_singleArticle",r);return e.get(o)},requestArticlesByTitle:function(t){var r={title:t},o=n("#query_articlesWork_fromTitle",r);return e.get(o)}}}]),myApp.factory("AuthorInfoService",["$http","$interpolate",function(e,t){var r="http://two.eelst.cs.unibo.it:8181/data/query",o=$("#prefixes").text(),n=function(e,n){var a=$(e).text(),i=o+t(a)(n),s=encodeURIComponent(i);return r+"?format=json&query="+s};return{requestAuthorArticles:function(t,r){var o={authorFamilyName:t,authorGivenName:r},a=n("#query_authorArticles",o);return e.get(a)},requestFullNameAuthorArticles:function(t){var r={authorFullName:t},o=n("#query_FullNameAuthorArticles",r);return e.get(o)}}}]),myApp.factory("RequestArticlesService",["$http",function(e){var t="",r="application/rdf+json",o="http://www.semanticlancet.eu/abstractfinder/",n=!1;return{setCompletedRequest:function(){n=!1},isRequestPending:function(){return n},setPendingRequest:function(){n=!0},searchArticles:function(a){n=!0,t=a;var i={method:"GET",params:{query:t},headers:{Accept:r},url:o};return e(i)},setSearchString:function(e){t=e},getSearchString:function(){return t}}}]),myApp.factory("ResponseInterceptorService",["$q","$injector",function(e,t){return{responseError:function(t){return 0===t.status&&console.log("server non contattabile"),e.reject(t)}}}]).config(["$httpProvider",function(e){e.interceptors.push("ResponseInterceptorService")}]),myApp.factory("StatesManagerService",function(){var e=[];return{saveCurrentStateArticles:function(t){e[e.length-1].articles=t},addEmptyState:function(t){e.push({stateValue:t})},getStates:function(){return e},restoreState:function(t){for(var r=e.length-1;r>t;r--)e.pop();return e[t]},removeAllStates:function(){e.length=0}}});