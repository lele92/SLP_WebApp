function getMyBasepath(e){return"app/views/appViews/"+e}if("undefined"==typeof $)throw new Error("This application's JavaScript requires jQuery");var App=angular.module("angle",["ngRoute","ngAnimate","ngStorage","ngCookies","pascalprecht.translate","ui.bootstrap","ui.router","oc.lazyLoad","cfp.loadingBar","ngSanitize","ngResource","tmh.dynamicLocale","ui.utils"]);App.run(["$rootScope","$state","$stateParams","$window","$templateCache","ArticlesInfoService",function(e,t,r,a,n,o){e.$state=t,e.$stateParams=r,e.$storage=a.localStorage,e.app={name:"BEX",description:"Web App to search and browse the contents of Semantic Lancet Triplestore",year:(new Date).getFullYear(),layout:{isFixed:!0,isCollapsed:!1,isBoxed:!1,isRTL:!1,horizontal:!1,isFloat:!1,asideHover:!1,theme:null},useFullLayout:!1,hiddenFooter:!1,viewAnimation:"ng-fadeInUp"},e.authors=[],o.getAllAuthors().then(function(t){e.authors=[];var r=t.data.results.bindings;for(var a in r)e.authors.push(r[a].fullName.value)},function(t){e.authors=[],console.error("Error while fetching authors. "+t.status+": "+t.statusText)})}]),App.config(["$stateProvider","$locationProvider","$urlRouterProvider","RouteHelpersProvider",function(e,t,r,a){"use strict";t.html5Mode(!1),r.otherwise("/app/homeSearch"),e.state("app",{url:"/app","abstract":!0,templateUrl:a.basepath("app.html"),controller:"AppController",resolve:a.resolveFor("loaders.css","spinkit","fastclick","modernizr","ngDialog","icons","screenfull","animo","slimscroll","toaster","whirl","ui.select","ui-router-extras")})}]).config(["$ocLazyLoadProvider","APP_REQUIRES",function(e,t){"use strict";e.config({debug:!1,events:!0,modules:t.modules})}]).config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(e,t,r,a){"use strict";App.controller=e.register,App.directive=t.directive,App.filter=r.register,App.factory=a.factory,App.service=a.service,App.constant=a.constant,App.value=a.value}]).config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"app/i18n/",suffix:".json"}),e.preferredLanguage("en"),e.useLocalStorage(),e.usePostCompiling(!0)}]).config(["tmhDynamicLocaleProvider",function(e){e.localeLocationPattern("vendor/angular-i18n/angular-locale_{{locale}}.js")}]).config(["cfpLoadingBarProvider",function(e){e.includeBar=!0,e.includeSpinner=!1,e.latencyThreshold=500,e.parentSelector=".wrapper > section"}]).config(["$tooltipProvider",function(e){e.options({appendToBody:!0})}]),App.constant("APP_COLORS",{primary:"#5d9cec",success:"#27c24c",info:"#23b7e5",warning:"#ff902b",danger:"#f05050",inverse:"#131e26",green:"#37bc9b",pink:"#f532e5",purple:"#7266ba",dark:"#3a3f51",yellow:"#fad732","gray-darker":"#232735","gray-dark":"#3a3f51",gray:"#dde6e9","gray-light":"#e4eaec","gray-lighter":"#edf1f2"}).constant("APP_MEDIAQUERY",{desktopLG:1200,desktop:992,tablet:768,mobile:480}).constant("APP_REQUIRES",{scripts:{whirl:["vendor/whirl/dist/whirl.css"],classyloader:["vendor/jquery-classyloader/js/jquery.classyloader.min.js"],animo:["vendor/animo.js/animo.js"],fastclick:["vendor/fastclick/lib/fastclick.js"],modernizr:["vendor/modernizr/modernizr.js"],animate:["vendor/animate.css/animate.min.css"],icons:["vendor/skycons/skycons.js","vendor/fontawesome/css/font-awesome.min.css","vendor/simple-line-icons/css/simple-line-icons.css","vendor/weather-icons/css/weather-icons.min.css"],sparklines:["app/vendor/sparklines/jquery.sparkline.min.js"],wysiwyg:["vendor/bootstrap-wysiwyg/bootstrap-wysiwyg.js","vendor/bootstrap-wysiwyg/external/jquery.hotkeys.js"],slimscroll:["vendor/slimScroll/jquery.slimscroll.min.js"],screenfull:["vendor/screenfull/dist/screenfull.js"],"vector-map":["vendor/ika.jvectormap/jquery-jvectormap-1.2.2.min.js","vendor/ika.jvectormap/jquery-jvectormap-1.2.2.css"],"vector-map-maps":["vendor/ika.jvectormap/jquery-jvectormap-world-mill-en.js","vendor/ika.jvectormap/jquery-jvectormap-us-mill-en.js"],loadGoogleMapsJS:["app/vendor/gmap/load-google-maps.js"],"flot-chart":["vendor/Flot/jquery.flot.js"],"flot-chart-plugins":["vendor/flot.tooltip/js/jquery.flot.tooltip.min.js","vendor/Flot/jquery.flot.resize.js","vendor/Flot/jquery.flot.pie.js","vendor/Flot/jquery.flot.time.js","vendor/Flot/jquery.flot.categories.js","vendor/flot-spline/js/jquery.flot.spline.min.js"],"jquery-ui":["vendor/jquery-ui/ui/core.js","vendor/jquery-ui/ui/widget.js"],"jquery-ui-widgets":["vendor/jquery-ui/ui/core.js","vendor/jquery-ui/ui/widget.js","vendor/jquery-ui/ui/mouse.js","vendor/jquery-ui/ui/draggable.js","vendor/jquery-ui/ui/droppable.js","vendor/jquery-ui/ui/sortable.js","vendor/jqueryui-touch-punch/jquery.ui.touch-punch.min.js"],moment:["vendor/moment/min/moment-with-locales.min.js"],inputmask:["vendor/jquery.inputmask/dist/jquery.inputmask.bundle.min.js"],flatdoc:["vendor/flatdoc/flatdoc.js"],codemirror:["vendor/codemirror/lib/codemirror.js","vendor/codemirror/lib/codemirror.css"],"codemirror-modes-web":["vendor/codemirror/mode/javascript/javascript.js","vendor/codemirror/mode/xml/xml.js","vendor/codemirror/mode/htmlmixed/htmlmixed.js","vendor/codemirror/mode/css/css.js"],taginput:["vendor/bootstrap-tagsinput/dist/bootstrap-tagsinput.css","vendor/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"],filestyle:["vendor/bootstrap-filestyle/src/bootstrap-filestyle.js"],parsley:["vendor/parsleyjs/dist/parsley.min.js"],datatables:["vendor/datatables/media/js/jquery.dataTables.min.js","app/vendor/datatable-bootstrap/css/dataTables.bootstrap.css"],"datatables-pugins":["app/vendor/datatable-bootstrap/js/dataTables.bootstrap.js","app/vendor/datatable-bootstrap/js/dataTables.bootstrapPagination.js","vendor/datatables-colvis/js/dataTables.colVis.js","vendor/datatables-colvis/css/dataTables.colVis.css"],fullcalendar:["vendor/fullcalendar/dist/fullcalendar.min.js","vendor/fullcalendar/dist/fullcalendar.css"],gcal:["vendor/fullcalendar/dist/gcal.js"],nestable:["vendor/nestable/jquery.nestable.js"],chartjs:["vendor/Chart.js/Chart.js"],morris:["vendor/raphael/raphael.js","vendor/morris.js/morris.js","vendor/morris.js/morris.css"],"loaders.css":["vendor/loaders.css/loaders.css"],spinkit:["vendor/spinkit/css/spinkit.css"]},modules:[{name:"toaster",files:["vendor/angularjs-toaster/toaster.js","vendor/angularjs-toaster/toaster.css"]},{name:"localytics.directives",files:["vendor/chosen_v1.2.0/chosen.jquery.min.js","vendor/chosen_v1.2.0/chosen.min.css","vendor/angular-chosen-localytics/chosen.js"]},{name:"ngDialog",files:["vendor/ngDialog/js/ngDialog.min.js","vendor/ngDialog/css/ngDialog.min.css","vendor/ngDialog/css/ngDialog-theme-default.min.css"]},{name:"ngWig",files:["vendor/ngWig/dist/ng-wig.min.js"]},{name:"ngTable",files:["vendor/ng-table/dist/ng-table.min.js","vendor/ng-table/dist/ng-table.min.css"]},{name:"ngTableExport",files:["vendor/ng-table-export/ng-table-export.js"]},{name:"angularBootstrapNavTree",files:["vendor/angular-bootstrap-nav-tree/dist/abn_tree_directive.js","vendor/angular-bootstrap-nav-tree/dist/abn_tree.css"]},{name:"htmlSortable",files:["vendor/html.sortable/dist/html.sortable.js","vendor/html.sortable/dist/html.sortable.angular.js"]},{name:"xeditable",files:["vendor/angular-xeditable/dist/js/xeditable.js","vendor/angular-xeditable/dist/css/xeditable.css"]},{name:"angularFileUpload",files:["vendor/angular-file-upload/angular-file-upload.js"]},{name:"ngImgCrop",files:["vendor/ng-img-crop/compile/unminified/ng-img-crop.js","vendor/ng-img-crop/compile/unminified/ng-img-crop.css"]},{name:"ui.select",files:["vendor/angular-ui-select/dist/select.js","vendor/angular-ui-select/dist/select.css"]},{name:"ui.codemirror",files:["vendor/angular-ui-codemirror/ui-codemirror.js"]},{name:"angular-carousel",files:["vendor/angular-carousel/dist/angular-carousel.css","vendor/angular-carousel/dist/angular-carousel.js"]},{name:"ngGrid",files:["vendor/ng-grid/build/ng-grid.min.js","vendor/ng-grid/ng-grid.css"]},{name:"infinite-scroll",files:["vendor/ngInfiniteScroll/build/ng-infinite-scroll.js"]},{name:"ui.bootstrap-slider",files:["vendor/seiyria-bootstrap-slider/dist/bootstrap-slider.min.js","vendor/seiyria-bootstrap-slider/dist/css/bootstrap-slider.min.css","vendor/angular-bootstrap-slider/slider.js"]},{name:"ui.grid",files:["vendor/angular-ui-grid/ui-grid.min.css","vendor/angular-ui-grid/ui-grid.min.js"]},{name:"textAngularSetup",files:["vendor/textAngular/src/textAngularSetup.js"]},{name:"textAngular",files:["vendor/textAngular/dist/textAngular-rangy.min.js","vendor/textAngular/src/textAngular.js","vendor/textAngular/src/textAngular.css"]},{name:"angular-rickshaw",files:["vendor/d3/d3.min.js","vendor/rickshaw/rickshaw.js","vendor/rickshaw/rickshaw.min.css","vendor/angular-rickshaw/rickshaw.js"],serie:!0},{name:"angular-chartist",files:["vendor/chartist/dist/chartist.min.css","vendor/chartist/dist/chartist.js","vendor/angular-chartist.js/dist/angular-chartist.js"],serie:!0},{name:"ui.map",files:["vendor/angular-ui-map/ui-map.js"]},{name:"ui-router-extras",files:["vendor/ui-router-extras/release/ct-ui-router-extras.min.js"]}]}),App.controller("InfiniteScrollController",["$scope","$timeout",function(e,t){e.images=[1,2,3,4,5,6,7,8,9,10],e.loadMore=function(){for(var t=e.images[e.images.length-1],r=1;10>=r;r++)e.images.push(t+r)}}]).factory("datasource",["$log","$timeout",function(e,t){"use strict";var r=function(e,r,a){return t(function(){var t,n,o,i;for(n=[],t=o=e,i=e+r-1;i>=e?i>=o:o>=i;t=i>=e?++o:--o)n.push("item #"+t);return a(n)},100)};return{get:r}}]),App.controller("LocalizationController",["$rootScope","tmhDynamicLocale","$locale",function(e,t,r){e.availableLocales={en:"English",es:"Spanish",de:"German",fr:"French",ar:"Arabic",ja:"Japanese",ko:"Korean",zh:"Chinese"},e.model={selectedLocale:"en"},e.$locale=r,e.changeLocale=t.set}]),App.controller("AppController",["$rootScope","$scope","$state","$translate","$window","$localStorage","$timeout","toggleStateService","colors","browser","cfpLoadingBar",function(e,t,r,a,n,o,i,s,l,c,u){"use strict";e.app.layout.horizontal="app-h"==e.$stateParams.layout;var d;e.$on("$stateChangeStart",function(e,t,r,a,n){$(".wrapper > section").length&&(d=i(function(){u.start()},0))}),e.$on("$stateChangeSuccess",function(e,t,r,a,n){e.targetScope.$watch("$viewContentLoaded",function(){i.cancel(d),u.complete()})}),e.$on("$stateNotFound",function(e,t,r,a){console.log(t.to),console.log(t.toParams),console.log(t.options)}),e.$on("$stateChangeError",function(e,t,r,a,n,o){console.log(o)}),e.$on("$stateChangeSuccess",function(t,a,o,i,s){n.scrollTo(0,0),e.currTitle=r.current.title}),e.currTitle=r.current.title,e.pageTitle=function(){var t=e.app.name+" - "+(e.currTitle||e.app.description);return document.title=t,t},e.$watch("app.layout.isCollapsed",function(t,r){t===!1&&e.$broadcast("closeSidebarMenu")}),angular.isDefined(o.layout)?t.app.layout=o.layout:o.layout=t.app.layout,e.$watch("app.layout",function(){o.layout=t.app.layout},!0),t.colorByName=l.byName,t.toggleUserBlock=function(){t.$broadcast("toggleUserBlock")},t.language={listIsOpen:!1,available:{en:"English",es_AR:"Español"},init:function(){var e=a.proposedLanguage()||a.use(),r=a.preferredLanguage();t.language.selected=t.language.available[e||r]},set:function(e,r){a.use(e),t.language.selected=t.language.available[e],t.language.listIsOpen=!t.language.listIsOpen}},t.language.init(),s.restoreState($(document.body)),e.cancel=function(e){e.stopPropagation()}}]),App.controller("ModalController",["$scope","$modal",function(e,t){e.open=function(e){var a=t.open({templateUrl:"/myModalContent.html",controller:r,size:e}),n=$("#modal-state");a.result.then(function(){n.text("Modal dismissed with OK status")},function(){n.text("Modal dismissed with Cancel status")})};var r=function(e,t){e.ok=function(){t.close("closed")},e.cancel=function(){t.dismiss("cancel")}};r.$inject=["$scope","$modalInstance"]}]),App.controller("NotificationController",["$scope",function(e){function t(e){for(var t=e.offsetTop,r=40;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop;return t-r-window.pageYOffset}function r(e){for(var t=e.offsetLeft,r=e.offsetWidth;e.offsetParent;)e=e.offsetParent,t+=e.offsetLeft;return t-r-window.pageXOffset}e.autoplace=function(e,a){var n="top";return t(a)<0&&(n="bottom"),r(a)<0&&(n="right"),n}}]),App.controller("SidebarController",["$rootScope","$scope","$state","$http","$timeout","Utils","StatesManagerService","ArticleManagerService","BookmarksManagerService",function(e,t,r,a,n,o,i,s,l){function c(e){e+="";for(var t in d)(0>e||e.indexOf(t)<0)&&(d[t]=!0)}function u(e){return"string"==typeof e&&!(e.indexOf("-")<0)}var d=[];e.$watch("app.layout.asideHover",function(e,t){t===!1&&e===!0&&c(-1)});var p=function(e){if(e){if(e.sref&&"#"!=e.sref)return r.is(e.sref)||r.includes(e.sref);var t=!1;return angular.forEach(e.submenu,function(e,r){p(e)&&(t=!0)}),t}};t.getMenuItemPropClasses=function(e){return(e.heading?"nav-heading":"")+(p(e)?" active":"")},t.getNum=function(e){switch(e){case"ArticlesLength":return s.getArticles().length;case"BookmarksLength":return l.getBookmarksIDB().values.length}},t.loadSidebarMenu=function(){var e="server/sidebar-menu.json",r=e+"?v="+(new Date).getTime();a.get(r).success(function(e){t.menuItems=e}).error(function(e,t,r,a){alert("Failure loading menu")})},t.loadSidebarMenu(),t.addCollapse=function(t,r){d[t]=e.app.layout.asideHover?!0:!p(r)},t.isCollapse=function(e){return d[e]},t.toggleCollapse=function(r,a){return o.isSidebarCollapsed()||e.app.layout.asideHover?!0:(angular.isDefined(d[r])?t.lastEventFromChild||(d[r]=!d[r],c(r)):a&&c(-1),t.lastEventFromChild=u(r),!0)},t.goTo=function(e){switch(e){case"app.home-search":r.go("app.home-search");break;case"app.articles-results":var t=i.getLastState();if(!t){r.go("app.articles-results");break}if(t.name){var a=angular.copy(t.params);a.noReload=!0,r.go(t.name,a)}else r.go("app.articles-results");break;default:r.go(e)}}}]),App.controller("uiSelectController",["$scope","$http",function(e,t){e.disabled=void 0,e.enable=function(){e.disabled=!1},e.disable=function(){e.disabled=!0},e.clear=function(){e.person.selected=void 0,e.address.selected=void 0,e.country.selected=void 0},e.person={},e.people=[{name:"Adam",email:"adam@email.com",age:10},{name:"Amalie",email:"amalie@email.com",age:12},{name:"Wladimir",email:"wladimir@email.com",age:30},{name:"Samantha",email:"samantha@email.com",age:31},{name:"Estefanía",email:"estefanía@email.com",age:16},{name:"Natasha",email:"natasha@email.com",age:54},{name:"Nicole",email:"nicole@email.com",age:43},{name:"Adrian",email:"adrian@email.com",age:21}],e.address={},e.refreshAddresses=function(r){var a={address:r,sensor:!1};return t.get("http://maps.googleapis.com/maps/api/geocode/json",{params:a}).then(function(t){e.addresses=t.data.results})},e.country={},e.countries=[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People's Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People's Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Vietnam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}],e.someGroupFn=function(e){return e.name[0]>="A"&&e.name[0]<="M"?"From A - M":e.name[0]>="N"&&e.name[0]<="Z"?"From N - Z":void 0},e.counter=0,e.someFunction=function(t,r){e.counter++,e.eventResult={item:t,model:r}},e.artilcesTypes=["Red","Green","Blue","Yellow","Magenta","Maroon","Umbra","Turquoise"],e.multipleDemo={},e.multipleDemo.colors=["Blue","Red"],e.multipleDemo.selectedPeople=[e.people[5],e.people[4]],e.multipleDemo.selectedPeopleWithGroupBy=[e.people[8],e.people[6]],e.multipleDemo.selectedPeopleSimple=["samantha@email.com","wladimir@email.com"]}]),App.filter("propsFilter",function(){return function(e,t){var r=[];return angular.isArray(e)?e.forEach(function(e){for(var a=!1,n=Object.keys(t),o=0;o<n.length;o++){var i=n[o],s=t[i].toLowerCase();if(-1!==e[i].toString().toLowerCase().indexOf(s)){a=!0;break}}a&&r.push(e)}):r=e,r}}),App.directive("href",function(){return{restrict:"A",compile:function(e,t){return function(e,r){(t.ngClick||""===t.href||"#"===t.href)&&(r.hasClass("dropdown-toggle")||r.on("click",function(e){e.preventDefault(),e.stopPropagation()}))}}}}),App.directive("animateEnabled",["$animate",function(e){return{link:function(t,r,a){t.$watch(function(){return t.$eval(a.animateEnabled,t)},function(t){e.enabled(!!t,r)})}}}]);var ChartJS=function(e){return{restrict:"A",scope:{data:"=",options:"=",id:"@",width:"=",height:"=",resize:"=",chart:"@",segments:"@",responsive:"=",tooltip:"=",legend:"="},link:function(t,r){var a=r[0].getContext("2d"),n=!1;t.size=function(){t.width<=0?(r.width(r.parent().width()),a.canvas.width=r.width()):(a.canvas.width=t.width||a.canvas.width,n=!0),t.height<=0?(r.height(r.parent().height()),a.canvas.height=a.canvas.width/2):(a.canvas.height=t.height||a.canvas.height,n=!0)},t.$watch("data",function(s,l){o&&o.destroy(),s&&(t.chart&&(e=t.chart),n&&(t.size(),i=new Chart(a)),(t.responsive||t.resize)&&(t.options.responsive=!0),void 0!==t.responsive&&(t.options.responsive=t.responsive),o=i[e](t.data,t.options),o.update(),t.legend&&angular.element(r[0]).parent().after(o.generateLegend()))},!0),t.$watch("tooltip",function(e,t){if(o&&o.draw(),void 0!==e&&o.segments&&!(!isFinite(e)||e>=o.segments.length||0>e)){var r=o.segments[e];r.save(),r.fillColor=r.highlightColor,o.showTooltip([r]),r.restore()}},!0),t.size();var o,i=new Chart(a)}}};App.directive("chartjs",function(){return ChartJS()}),App.directive("linechart",function(){return ChartJS("Line")}),App.directive("barchart",function(){return ChartJS("Bar")}),App.directive("radarchart",function(){return ChartJS("Radar")}),App.directive("polarchart",function(){return ChartJS("PolarArea")}),App.directive("piechart",function(){return ChartJS("Pie")}),App.directive("doughnutchart",function(){return ChartJS("Doughnut")}),App.directive("donutchart",function(){return ChartJS("Doughnut")}),App.directive("classyloader",["$timeout","Utils",function(e,t){"use strict";var r=$(window),a="js-is-in-view";return{restrict:"A",link:function(n,o,i){function s(e,r){var n=-20;!e.hasClass(a)&&t.isInView(e,{topoffset:n})&&l(e,r)}function l(e,t){e.ClassyLoader(t).addClass(a)}e(function(){var e=$(o),t=e.data();t&&(t.triggerInView?(r.scroll(function(){s(e,t)}),s(e,t)):l(e,t))},0)}}}]),App.directive("resetKey",["$state","$rootScope",function(e,t){"use strict";return{restrict:"A",scope:{resetKey:"="},link:function(e,t,r){e.resetKey=r.resetKey},controller:["$scope","$element",function(r,a){a.on("click",function(a){a.preventDefault(),r.resetKey?(delete t.$storage[r.resetKey],e.go(e.current,{},{reload:!0})):$.error("No storage key specified for reset.")})}]}}]),App.directive("filestyle",function(){return{restrict:"A",controller:["$scope","$element",function(e,t){var r=t.data();r.classInput=t.data("classinput")||r.classInput,t.filestyle(r)}]}}),App.directive("flatdoc",["$location",function(e){return{restrict:"EA",template:"<div role='flatdoc'><div role='flatdoc-menu'></div><div role='flatdoc-content'></div></div>",link:function(e,t,r){Flatdoc.run({fetcher:Flatdoc.file(r.src)});var a=$("html, body");$(document).on("flatdoc:ready",function(){var e=$('[role="flatdoc-menu"]');e.find("a").on("click",function(t){t.preventDefault(),t.stopPropagation();var r=$(this);e.find("a.active").removeClass("active"),r.addClass("active"),a.animate({scrollTop:$(this.getAttribute("href")).offset().top-($(".topnavbar").height()+10)},800)})})}}}]),App.directive("flot",["$http","$timeout",function(e,t){"use strict";function r(r,a,n){function o(){var e;if(r.dataset&&r.options)return e=$.plot(d,r.dataset,r.options),r.$emit("plotReady",e),r.callback&&r.callback(e,r),e}function i(e){return u?(u.setData(e),u.setupGrid(),u.draw()):(u=o(),s(r.series),u)}function s(e){function t(e){return function(t,a){r[a]&&r[a][e]&&(r[a][e].show=t)}}if(u&&e){var r=u.getData();for(var a in e)angular.forEach(e[a],t(a));u.setData(r),u.draw()}}function l(a){a&&e.get(a).success(function(e){t(function(){r.dataset=e})}).error(function(){$.error("Flot chart: Bad request.")})}var c,u,d,p,f=220;u=null,p=n.width||"100%",c=n.height||f,d=$(a.children()[0]),d.css({width:p,height:c}),r.$watchCollection("dataset",i,!0),r.$watch("series",s,!0),r.$watch("src",l)}return{restrict:"EA",template:"<div></div>",scope:{dataset:"=?",options:"=",series:"=",callback:"=",src:"="},link:r}}]),App.directive("formWizard",["$parse",function(e){"use strict";function t(e,t,r){var a=this;a.quantity=parseInt(e,10),a.validate=t,a.element=r,a.init=function(){return a.createsteps(a.quantity),a.go(1),a},a.go=function(e){if(angular.isDefined(a.steps[e])){if(a.validate&&1!==e){var t=$(a.element),r=t.children().children("div").get(e-2);if(!1===t.parsley().validate(r.id))return!1}a.cleanall(),a.steps[e]=!0}},a.active=function(e){return!!a.steps[e]},a.cleanall=function(){for(var e in a.steps)a.steps[e]=!1},a.createsteps=function(e){a.steps=[];for(var t=1;e>=t;t++)a.steps[t]=!1}}return{restrict:"A",scope:!0,link:function(r,a,n){var o=e(n.validateSteps)(r),i=new t(n.steps,!!o,a);r.wizard=i.init()}}}]),App.directive("toggleFullscreen",function(){"use strict";return{restrict:"A",link:function(e,t,r){t.on("click",function(e){e.preventDefault(),screenfull.enabled?(screenfull.toggle(),screenfull.isFullscreen?$(this).children("em").removeClass("fa-expand").addClass("fa-compress"):$(this).children("em").removeClass("fa-compress").addClass("fa-expand")):$.error("Fullscreen not enabled")})}}}),App.directive("loadCss",function(){"use strict";function e(e){var t="autoloaded-stylesheet",r=$("#"+t).attr("id",t+"-old");return $("head").append($("<link/>").attr({id:t,rel:"stylesheet",href:e})),r.length&&r.remove(),$("#"+t)}return{restrict:"A",link:function(t,r,a){r.on("click",function(t){r.is("a")&&t.preventDefault();var n,o=a.loadCss;o?(n=e(o),n||$.error("Error creating stylesheet link element.")):$.error("No stylesheet location defined.")})}}}),App.directive("masked",function(){return{restrict:"A",controller:["$scope","$element",function(e,t){var r=$(t);$.fn.inputmask&&r.inputmask()}]}}),function(){"use strict";function e(e){return function(){return{restrict:"EA",scope:{morrisData:"=",morrisOptions:"="},link:function(t,r,a){t.$watch("morrisData",function(e,r){e&&(t.morrisInstance.setData(e),t.morrisInstance.redraw())},!0),t.morrisOptions.element=r,t.morrisData&&(t.morrisOptions.data=t.morrisData),t.morrisInstance=new Morris[e](t.morrisOptions)}}}}App.directive("morrisBar",e("Bar")),App.directive("morrisDonut",e("Donut")),App.directive("morrisLine",e("Line")),App.directive("morrisArea",e("Area"))}(),App.directive("searchOpen",["navSearch",function(e){"use strict";return{restrict:"A",controller:["$scope","$element",function(t,r){r.on("click",function(e){e.stopPropagation()}).on("click",e.toggle)}]}}]).directive("searchDismiss",["navSearch",function(e){"use strict";var t='.navbar-form input[type="text"]';return{restrict:"A",controller:["$scope","$element",function(r,a){$(t).on("click",function(e){e.stopPropagation()}).on("keyup",function(t){27==t.keyCode&&e.dismiss()}),$(document).on("click",e.dismiss),a.on("click",function(e){e.stopPropagation()}).on("click",e.dismiss)}]}}]),App.directive("nestable",["$timeout",function(e){return{restrict:"A",scope:{nestableControl:"="},controller:["$scope","$element",function(t,r){function a(e){return function(){r.nestable(e)}}var n=r.data();if(e(function(){r.nestable(n)}),t.nestableControl){var o=t.nestableControl;o.serialize=function(){return r.nestable("serialize")},o.expandAll=a("expandAll"),o.collapseAll=a("collapseAll"),r.on("change",function(){"function"==typeof o.onchange&&e(function(){o.onchange.apply(arguments)})})}}]}}]),App.directive("notify",["$window","Notify",function(e,t){return{restrict:"A",scope:{options:"=",message:"="},link:function(e,r,a){r.on("click",function(r){r.preventDefault(),t.alert(e.message,e.options)})}}}]),App.directive("now",["dateFilter","$interval",function(e,t){return{restrict:"E",link:function(r,a,n){function o(){var t=e(new Date,i);a.text(t)}var i=n.format;o(),t(o,1e3)}}}]),App.directive("paneltool",["$compile","$timeout",function(e,t){function r(e,t){var r="";return t=t||{},t.toolCollapse&&(r+=a.collapse.replace(/{{panelId}}/g,e.parent().parent().attr("id"))),t.toolDismiss&&(r+=a.dismiss),t.toolRefresh&&(r+=a.refresh.replace(/{{spinner}}/g,t.toolRefresh)),r}var a={collapse:"<a href='#' panel-collapse='' tooltip='Collapse Panel' ng-click='{{panelId}} = !{{panelId}}'> \r\n                <em ng-show='{{panelId}}' class='fa fa-plus'></em> \r\n                <em ng-show='!{{panelId}}' class='fa fa-minus'></em> \r\n              </a>",dismiss:"<a href='#' panel-dismiss='' tooltip='Close Panel'>\r\n               <em class='fa fa-times'></em>\r\n             </a>",refresh:"<a href='#' panel-refresh='' data-spinner='{{spinner}}' tooltip='Refresh Panel'>\r\n               <em class='fa fa-refresh'></em>\r\n             </a>"
};return{restrict:"E",scope:!1,link:function(a,n,o){var i=a.panelTools||o;t(function(){n.html(r(n,i)).show(),e(n.contents())(a),n.addClass("pull-right")})}}}]).directive("panelDismiss",["$q","Utils",function(e,t){"use strict";return{restrict:"A",controller:["$scope","$element",function(r,a){var n="panel-remove",o="panel-removed";a.on("click",function(){function a(){var t=e.defer(),a=t.promise;r.$emit(n,l.attr("id"),t),a.then(i)}function i(){t.support.animation?l.animo({animation:"bounceOut"},s):s()}function s(){var e=l.parent();l.remove(),e.filter(function(){var e=$(this);return e.is('[class*="col-"]:not(.sortable)')&&0===e.children("*").length}).remove(),r.$emit(o,l.attr("id"))}var l=$(this).closest(".panel");a()})}]}}]).directive("panelCollapse",["$timeout",function(e){"use strict";function t(e,t){if(!e)return!1;var r=angular.fromJson(a[n]);r||(r={}),r[e]=t,a[n]=angular.toJson(r)}function r(e){if(!e)return!1;var t=angular.fromJson(a[n]);return t?t[e]:void 0}var a,n="panelState";return{restrict:"A",scope:!1,controller:["$scope","$element",function(n,o){var i=$(o),s=i.closest(".panel"),l=s.attr("id");a=n.$storage;var c=r(l);"undefined"!=typeof c&&e(function(){n[l]=c},10),o.bind("click",function(){t(l,!n[l])})}]}}]).directive("panelRefresh",["$q",function(e){"use strict";return{restrict:"A",scope:!1,controller:["$scope","$element",function(e,t){function r(e,t){if(t){var r="#"==t.charAt(0)?t:"#"+t;angular.element(r).removeClass(n)}}var a="panel-refresh",n="whirl",o="standard";t.on("click",function(){var t=$(this),r=t.parents(".panel").eq(0),i=t.data("spinner")||o;r.addClass(n+" "+i),e.$emit(a,r.attr("id"))}),e.$on("removeSpinner",r)}]}}]),App.directive("animate",["$window","Utils",function(e,t){"use strict";var r=$(window).add("body, .wrapper");return{restrict:"A",link:function(e,a,n){function o(e){!e.hasClass("anim-running")&&t.isInView(e,{topoffset:s})&&(e.addClass("anim-running"),setTimeout(function(){e.addClass("anim-done").animo({animation:c,duration:.7})},l))}var i=$(a),s=i.data("offset"),l=i.data("delay")||100,c=i.data("play")||"bounce";"undefined"!=typeof s&&(o(i),r.scroll(function(){o(i)})),i.on("click",function(){var e=$(this),t=e.data("target"),r=e.data("play")||"bounce",a=$(t);a&&a.length&&a.animo({animation:r})})}}}]),App.directive("scrollable",function(){return{restrict:"EA",link:function(e,t,r){var a=250;t.slimScroll({height:r.height||a})}}}),App.directive("sidebar",["$rootScope","$window","Utils",function(e,t,r){function a(){var e=$("<div/>",{"class":"dropdown-backdrop"});e.insertAfter(".aside-inner").on("click mouseenter",function(){i()})}function n(e){e.siblings("li").removeClass("open").end().toggleClass("open")}function o(e){i();var t=e.children("ul");if(!t.length)return $();if(e.hasClass("open"))return n(e),$();var r=$(".aside"),a=$(".aside-inner"),o=parseInt(a.css("padding-top"),0)+parseInt(r.css("padding-top"),0),u=t.clone().appendTo(r);n(e);var d=e.position().top+o-l.scrollTop(),p=c.height();return u.addClass("nav-floating").css({position:s.app.layout.isFixed?"fixed":"absolute",top:d,bottom:u.outerHeight(!0)+d>p?0:"auto"}),u.on("mouseleave",function(){n(e),u.remove()}),u}function i(){$(".dropdown-backdrop").remove(),$(".sidebar-subnav.nav-floating").remove(),$(".sidebar li.open").removeClass("open")}var s,l,c=$(t),u=$("body"),d=e.$state.current.name;return{restrict:"EA",template:'<nav class="sidebar" ng-transclude></nav>',transclude:!0,replace:!0,link:function(t,n,p){s=t,l=n;var f=r.isTouch()?"click":"mouseenter",m=$();l.on(f,".nav > li",function(){(r.isSidebarCollapsed()||e.app.layout.asideHover)&&(m.trigger("mouseleave"),m=o($(this)),a())}),t.$on("closeSidebarMenu",function(){i()}),c.on("resize",function(){r.isMobile()||u.removeClass("aside-toggled")}),e.$on("$stateChangeStart",function(t,r,a,n,o){d=r.name,$("body.aside-toggled").removeClass("aside-toggled"),e.$broadcast("closeSidebarMenu")}),angular.isDefined(p.sidebarAnyclickClose)&&$(".wrapper").on("click.sidebar",function(e){u.hasClass("aside-toggled")&&($(e.target).parents(".aside").length||u.removeClass("aside-toggled"))})}}}]),App.directive("sparkline",["$timeout","$window",function(e,t){"use strict";function r(e){var t=e.data();t.type=t.type||"bar",t.disableHiddenCheck=!0,e.sparkline("html",t),t.resize&&$(window).resize(function(){e.sparkline("html",t)})}return{restrict:"EA",controller:["$scope","$element",function(t,a){var n=function(){r(a)};e(n)}]}}]),App.directive("checkAll",function(){"use strict";return{restrict:"A",controller:["$scope","$element",function(e,t){t.on("change",function(){var e=$(this),t=e.index()+1,r=e.find('input[type="checkbox"]'),a=e.parents("table");a.find("tbody > tr > td:nth-child("+t+') input[type="checkbox"]').prop("checked",r[0].checked)})}]}}),App.directive("tagsinput",["$timeout",function(e){return{restrict:"A",require:"ngModel",link:function(t,r,a,n){r.on("itemAdded itemRemoved",function(){n.$viewValue&&n.$viewValue.split&&(n.$setViewValue(n.$viewValue.split(",")),n.$render())}),e(function(){r.tagsinput()})}}}]),App.directive("toggleState",["toggleStateService",function(e){"use strict";return{restrict:"A",link:function(t,r,a){var n=$("body");$(r).on("click",function(t){t.preventDefault();var r=a.toggleState;r&&(n.hasClass(r)?(n.removeClass(r),a.noPersist||e.removeState(r)):(n.addClass(r),a.noPersist||e.addState(r)))})}}}]),App.directive("validateForm",function(){return{restrict:"A",controller:["$scope","$element",function(e,t){var r=$(t);$.fn.parsley&&r.parsley()}]}}),App.service("browser",function(){"use strict";var e,t,r=function(e){e=e.toLowerCase();var t=/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],r=/(ipad)/.exec(e)||/(iphone)/.exec(e)||/(android)/.exec(e)||/(windows phone)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/i.exec(e)||[];return{browser:t[3]||t[1]||"",version:t[2]||"0",platform:r[0]||""}};if(e=r(window.navigator.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version,t.versionNumber=parseInt(e.version)),e.platform&&(t[e.platform]=!0),(t.android||t.ipad||t.iphone||t["windows phone"])&&(t.mobile=!0),(t.cros||t.mac||t.linux||t.win)&&(t.desktop=!0),(t.chrome||t.opr||t.safari)&&(t.webkit=!0),t.rv){var a="msie";e.browser=a,t[a]=!0}if(t.opr){var n="opera";e.browser=n,t[n]=!0}if(t.safari&&t.android){var o="android";e.browser=o,t[o]=!0}return t.name=e.browser,t.platform=e.platform,t}),App.factory("colors",["APP_COLORS",function(e){return{byName:function(t){return e[t]||"#fff"}}}]),App.service("navSearch",function(){var e="form.navbar-form";return{toggle:function(){var t=$(e);t.toggleClass("open");var r=t.hasClass("open");t.find("input")[r?"focus":"blur"]()},dismiss:function(){$(e).removeClass("open").find('input[type="text"]').blur().val("")}}}),App.service("Notify",["$timeout",function(e){function t(t,r){t&&e(function(){$.notify(t,r||{})})}this.alert=t}]),function(e,t,r){var a={},n={},o=function(t){return"string"==e.type(t)&&(t={message:t}),arguments[1]&&(t=e.extend(t,"string"==e.type(arguments[1])?{status:arguments[1]}:arguments[1])),new s(t).show()},i=function(e,t){if(e)for(var r in n)e===n[r].group&&n[r].close(t);else for(var r in n)n[r].close(t)},s=function(t){this.options=e.extend({},s.defaults,t),this.uuid="ID"+(new Date).getTime()+"RAND"+Math.ceil(1e5*Math.random()),this.element=e(['<div class="uk-notify-message alert-dismissable">','<a class="close">&times;</a>',"<div>"+this.options.message+"</div>","</div>"].join("")).data("notifyMessage",this),this.options.status&&(this.element.addClass("alert alert-"+this.options.status),this.currentstatus=this.options.status),this.group=this.options.group,n[this.uuid]=this,a[this.options.pos]||(a[this.options.pos]=e('<div class="uk-notify uk-notify-'+this.options.pos+'"></div>').appendTo("body").on("click",".uk-notify-message",function(){e(this).data("notifyMessage").close()}))};return e.extend(s.prototype,{uuid:!1,element:!1,timout:!1,currentstatus:"",group:!1,show:function(){if(!this.element.is(":visible")){var e=this;a[this.options.pos].show().prepend(this.element);var t=parseInt(this.element.css("margin-bottom"),10);return this.element.css({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0}).animate({opacity:1,"margin-top":0,"margin-bottom":t},function(){if(e.options.timeout){var t=function(){e.close()};e.timeout=setTimeout(t,e.options.timeout),e.element.hover(function(){clearTimeout(e.timeout)},function(){e.timeout=setTimeout(t,e.options.timeout)})}}),this}},close:function(e){var t=this,r=function(){t.element.remove(),a[t.options.pos].children().length||a[t.options.pos].hide(),delete n[t.uuid]};this.timeout&&clearTimeout(this.timeout),e?r():this.element.animate({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0},function(){r()})},content:function(e){var t=this.element.find(">div");return e?(t.html(e),this):t.html()},status:function(e){return e?(this.element.removeClass("alert alert-"+this.currentstatus).addClass("alert alert-"+e),this.currentstatus=e,this):this.currentstatus}}),s.defaults={message:"",status:"normal",timeout:5e3,group:null,pos:"top-center"},e.notify=o,e.notify.message=s,e.notify.closeAll=i,o}(jQuery,window,document),App.provider("RouteHelpers",["APP_REQUIRES",function(e){"use strict";this.basepath=function(e){return"app/views/"+e},this.resolveFor=function(){var t=arguments;return{deps:["$ocLazyLoad","$q",function(r,a){function n(e){return i.then("function"==typeof e?e:function(){var t=o(e);return t?r.load(t):$.error("Route resolve: Bad resource name ["+e+"]")})}function o(t){if(e.modules)for(var r in e.modules)if(e.modules[r].name&&e.modules[r].name===t)return e.modules[r];return e.scripts&&e.scripts[t]}for(var i=a.when(1),s=0,l=t.length;l>s;s++)i=n(t[s]);return i}]}},this.$get=function(){}}]),App.service("toggleStateService",["$rootScope",function(e){var t="toggleState",r={hasWord:function(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e)},addWord:function(e,t){return this.hasWord(e,t)?void 0:e+(e?" ":"")+t},removeWord:function(e,t){return this.hasWord(e,t)?e.replace(new RegExp("(^|\\s)*"+t+"(\\s|$)*","g"),""):void 0}};return{addState:function(a){var n=angular.fromJson(e.$storage[t]);n=n?r.addWord(n,a):a,e.$storage[t]=angular.toJson(n)},removeState:function(a){var n=e.$storage[t];n&&(n=r.removeWord(n,a),e.$storage[t]=angular.toJson(n))},restoreState:function(r){var a=angular.fromJson(e.$storage[t]);a&&r.addClass(a)}}}]),App.service("Utils",["$window","APP_MEDIAQUERY",function(e,t){"use strict";var r=angular.element("html"),a=angular.element(e),n=angular.element("body");return{support:{transition:function(){var e=function(){var e,t=document.body||document.documentElement,r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in r)if(void 0!==t.style[e])return r[e]}();return e&&{end:e}}(),animation:function(){var e=function(){var e,t=document.body||document.documentElement,r={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(e in r)if(void 0!==t.style[e])return r[e]}();return e&&{end:e}}(),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},touch:"ontouchstart"in window&&navigator.userAgent.toLowerCase().match(/mobile|tablet/)||window.DocumentTouch&&document instanceof window.DocumentTouch||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0||!1,mutationobserver:window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||null},isInView:function(e,t){var r=$(e);if(!r.is(":visible"))return!1;var n=a.scrollLeft(),o=a.scrollTop(),i=r.offset(),s=i.left,l=i.top;return t=$.extend({topoffset:0,leftoffset:0},t),l+r.height()>=o&&l-t.topoffset<=o+a.height()&&s+r.width()>=n&&s-t.leftoffset<=n+a.width()?!0:!1},langdirection:"rtl"==r.attr("dir")?"right":"left",isTouch:function(){return r.hasClass("touch")},isSidebarCollapsed:function(){return n.hasClass("aside-collapsed")},isSidebarToggled:function(){return n.hasClass("aside-toggled")},isMobile:function(){return a.width()<t.tablet}}}]),App.service("vectorMap",function(){"use strict";return{init:function(e,t,r,a){e.vectorMap({map:t.mapName,backgroundColor:t.bgColor,zoomMin:1,zoomMax:8,zoomOnScroll:!1,regionStyle:{initial:{fill:t.regionFill,"fill-opacity":1,stroke:"none","stroke-width":1.5,"stroke-opacity":1},hover:{"fill-opacity":.8},selected:{fill:"blue"},selectedHover:{}},focusOn:{x:.4,y:.6,scale:t.scale},markerStyle:{initial:{fill:t.markerColor,stroke:t.markerColor}},onRegionLabelShow:function(e,t,a){r&&r[a]&&t.html(t.html()+": "+r[a]+" visitors")},markers:a,series:{regions:[{values:r,scale:t.scaleColors,normalizeFunction:"polynomial"}]}})}}});var myApp=angular.module("SLP_WebApp",["angle"]);myApp.run(["$log","$rootScope","$state","$stateParams",function(e,t,r,a){t.$state=r,t.$stateParams=a,t.offsidebarOverlap=!0,t.colorsMap={"http://purl.org/spar/cito/citesForInformation":{color:"#1693A5",toString:"cites for information",value:"http://purl.org/spar/cito/citesForInformation"},"http://purl.org/spar/cito/citesAsMetadataDocument":{color:"#2f9e68",toString:"cites as metadata document",value:"http://purl.org/spar/cito/citesAsMetadataDocument"},"http://purl.org/spar/cito/citesAsDataSource":{color:"#1B6E72",toString:"cites as data source",value:"http://purl.org/spar/cito/citesAsDataSource"},"http://purl.org/spar/cito/citesAsAuthority":{color:"#6B8E23",toString:"cites as authority",value:"http://purl.org/spar/cito/citesAsAuthority"},"http://purl.org/spar/cito/obtainsSupportFrom":{color:"#663399",toString:"obtains support from",value:"http://purl.org/spar/cito/obtainsSupportFrom"},"http://purl.org/spar/cito/includesExcerptFrom":{color:"#2E8B57",toString:"includes excerpt from",value:"http://purl.org/spar/cito/includesExcerptFrom"},"http://purl.org/spar/cito/confirms":{color:"#D8BFD8",toString:"confirms",value:"http://purl.org/spar/cito/confirms"},"http://purl.org/spar/cito/containsAssertionFrom":{color:"#FF6347",toString:"contains assertion from",value:"http://purl.org/spar/cito/containsAssertionFrom"},"http://purl.org/spar/cito/derides":{color:"#CD5C5C",toString:"derides",value:"http://purl.org/spar/cito/derides"},"http://purl.org/spar/cito/includesQuotationFrom":{color:"#DAA520",toString:"includes quotation from",value:"http://purl.org/spar/cito/includesQuotationFrom"},"http://purl.org/spar/cito/citesAsRelated":{color:"#483D8B",toString:"cites as related",value:"http://purl.org/spar/cito/citesAsRelated"},"http://purl.org/spar/cito/usesMethodIn":{color:"#8B0000",toString:"uses method in",value:"http://purl.org/spar/cito/usesMethodIn"},"http://purl.org/spar/cito/documents":{color:"#008B8B",toString:"documents",value:"http://purl.org/spar/cito/documents"},"http://purl.org/spar/cito/describes":{color:"#698296",toString:"describes",value:"http://purl.org/spar/cito/describes"},"http://purl.org/spar/cito/usesConclusionsFrom":{color:"#efca95",toString:"uses conclusions from",value:"http://purl.org/spar/cito/usesConclusionsFrom"},"http://purl.org/spar/cito/repliesTo":{color:"#698296",toString:"replies to",value:"http://purl.org/spar/cito/repliesTo"},"http://purl.org/spar/cito/qualifies":{color:"#653838",toString:"qualifies",value:"http://purl.org/spar/cito/qualifies"},"http://purl.org/spar/cito/corrects":{color:"#7aa33e",toString:"corrects",value:"http://purl.org/spar/cito/corrects"},"http://purl.org/spar/cito/agreesWith":{color:"#6a5ca4",toString:"agrees with",value:"http://purl.org/spar/cito/agreesWith"},"http://purl.org/spar/cito/citesAsEvidence":{color:"#946D67",toString:"cites as evidence",value:"http://purl.org/spar/cito/citesAsEvidence"},"http://purl.org/spar/cito/usesDataFrom":{color:"#b559a2",toString:"uses data from",value:"http://purl.org/spar/cito/usesDataFrom"},"http://purl.org/spar/cito/parodies":{color:"#C71E3F",toString:"parodies",value:"http://purl.org/spar/cito/parodies"},"http://purl.org/spar/cito/critiques":{color:"#3d6e4e",toString:"critiques",value:"http://purl.org/spar/cito/critiques"},"http://purl.org/spar/cito/compiles":{color:"#ac4987",toString:"compiles",value:"http://purl.org/spar/cito/compiles"},"http://purl.org/spar/cito/speculatesOn":{color:"#896fc2",toString:"speculates on",value:"http://purl.org/spar/cito/speculatesOn"},"http://purl.org/spar/cito/extends":{color:"#613e49",toString:"extends",value:"http://purl.org/spar/cito/extends"},"http://purl.org/spar/cito/citesAsSourceDocument":{color:"#c4c5c9",toString:"cites as source document",value:"http://purl.org/spar/cito/citesAsSourceDocument"},"http://purl.org/spar/cito/updates":{color:"#f29598",toString:"updates",value:"http://purl.org/spar/cito/updates"},"http://purl.org/spar/cito/discusses":{color:"#1b3b14",toString:"discusses",value:"http://purl.org/spar/cito/discusses"},"http://purl.org/spar/cito/citesAsPotentialSolution":{color:"#2a2073",toString:"cites as potential solution",value:"http://purl.org/spar/cito/citesAsPotentialSolution"},"http://purl.org/spar/cito/obtainsBackgroundFrom":{color:"#2c51af",toString:"obtains background from",value:"http://purl.org/spar/cito/obtainsBackgroundFrom"},"http://purl.org/spar/cito/reviews":{color:"#302006",toString:"reviews",value:"http://purl.org/spar/cito/reviews"},"http://purl.org/spar/cito/supports":{color:"#7d7b58",toString:"supports",value:"http://purl.org/spar/cito/supports"},"http://purl.org/spar/cito/citesAsRecommendedReading":{color:"#cc370e",toString:"cites as recommended reading",value:"http://purl.org/spar/cito/citesAsRecommendedReading"},"http://purl.org/spar/cito/credits":{color:"#d3ccf0",toString:"credits",value:"http://purl.org/spar/cito/credits"},"http://purl.org/spar/cito/disagreesWith":{color:"#e89ec8",toString:"disagrees with",value:"http://purl.org/spar/cito/disagreesWith"},"http://purl.org/spar/cito/plagiarizes":{color:"#312673",toString:"plagiarizes",value:"http://purl.org/spar/cito/plagiarizes"}},t.inheritUrlParams=!1,t.paramsTokensDelimiter=";",t.showRefiningOptions={value:!1}}]),myApp.constant("SEARCH_TYPE",{abstractSearch:"abstractSearch",titleSearch:"titleSearch",authorSearch:"authorSearch",singleArticleDoi:"singleArticleDoi",list:"list"}).constant("ORDER_BY",{publicationYear:"publicationYear",title:"title",globalCitations:"globalCitations",totCitActs:"totCitActs"}).constant("SORT",{desc:!0,asc:!1}).constant("ARTICLE_TYPES",{JournalArticle:"Journal Article",ConferencePaper:"Conference Paper",JournalReviewArticle:"Journal Review Article",JournalEditorial:"Journal Editorial",Letter:"Letter",Article:"Article"}).constant("FILTERS_TYPE",{Articles_types:"type",Articles_afterYear:"afterYear",Citations_afterYear:"citAfterYear",Citations_selfCitations:"selfCitations",Citations_authors:"citAuthors",Citations_functions_exclude:"citFunctionsExclude",Citations_functions:"citFunctions"}).constant("ARTICLES_REFINEMENTS_PARAMS","&orderBy&sort&afterYear&type").constant("CITATIONS_REFINEMENTS_PARAMS","&orderCitBy&sortCit&citAfterYear&selfCitations&citAuthors&citFunctions"),myApp.config(["$stateProvider","SEARCH_TYPE","ARTICLES_REFINEMENTS_PARAMS","CITATIONS_REFINEMENTS_PARAMS",function(e,t,r,a){e.state("app.home-search",{url:"/homeSearch",title:"Search",templateUrl:getMyBasepath("home-search.html"),controller:"HomeSearchController",controllerAs:"HomeSearchCtrl"}).state("app.articles-results",{url:"/articles/?abstract&author&title&list"+r+a,params:{newSearch:!1,searchQuery:void 0,searchType:void 0,noReload:!1},templateUrl:getMyBasepath("articles-results.html"),controller:"ArticlesResultsController",controllerAs:"ArticlesResultsCtrl",onEnter:["StatesManagerService","$stateParams","ArticlesFiltersManager",function(e,r,a){function n(e){return!0}n(r)&&(r["abstract"]?(r.searchType=t.abstractSearch,r.searchQuery=r["abstract"]):r.author?(r.searchType=t.authorSearch,r.searchQuery=r.author):r.title?(r.searchType=t.titleSearch,r.searchQuery=r.title):r.list&&(r.searchType=t.list,r.searchQuery=r.list)),e.setState("app.articles-results",r)}],reloadOnSearch:!1}).state("app.author-articles",{url:"/author/:authorId/articles/?"+r+a,title:"Author articles",params:{newSearch:!1,searchQuery:void 0,searchType:t.authorSearch,noReload:!1},templateUrl:getMyBasepath("articles-results.html"),controller:"ArticlesResultsController",controllerAs:"ArticlesResultsCtrl",onEnter:["ArticlesFiltersManager","StatesManagerService","$stateParams",function(e,t,r){r.searchQuery=r.authorId,t.setState("app.author-articles",r)}],reloadOnSearch:!1}).state("app.article-doi",{url:"/article/:doi?"+a,title:"Article",params:{title:"",searchType:t.singleArticleDoi,noReload:!1},templateUrl:getMyBasepath("articles-results.html"),controller:"ArticlesResultsController",controllerAs:"ArticlesResultsCtrl",onEnter:["StatesManagerService","$stateParams",function(e,t){e.setState("app.article-doi",t)}],reloadOnSearch:!1}).state("app.bookmarks",{url:"/bookmarks",title:"Bookmarks",templateUrl:getMyBasepath("bookmarks.html"),controller:"BookmarksController",controllerAs:"BookmarksCtrl"}).state("app.settings",{url:"/settings",title:"Settings",templateUrl:getMyBasepath("settings.html"),controller:"SettingsController",controllerAs:"SettingsCtrl"}).state("app.about",{url:"/about",title:"About",templateUrl:getMyBasepath("about.html"),controller:"AboutController",controllerAs:"AboutCtrl"}).state("app.stateTest",{url:"/test/articles/:searchType/:searchQuery?param0&param1",title:"test",templateUrl:getMyBasepath("testView.html"),controller:"testController",controllerAs:"testCtrl",reloadOnSearch:!1})}]),myApp.controller("AboutController",["$rootScope",function(e){}]),myApp.controller("ArticlesFiltersController",["ArticlesFiltersManager","$scope","$rootScope","FILTERS_TYPE","StatesManagerService",function(e,t,r,a,n){var o=this,i=new Date;o.year=i.getFullYear(),e.checkFilters();var s=e.getFilterActivatedList();o.articleTypes=e.getArticleTypes(),o.selectedArticleTypes=e.getSelectedArticleTypes(),o.publicationYearF=e.getStartingPublicationYearF(),o.publicationYearV=o.publicationYearF.value,o.checkType=-1!=s.indexOf(a.Articles_types),o.checkYear=-1!=s.indexOf(a.Articles_afterYear),r.$on("$stateChangeSuccess",function(t,r,n,i,l){e.checkFilters(),o.publicationYearV=o.publicationYearF.value,o.checkType=-1!=s.indexOf(a.Articles_types),o.checkYear=-1!=s.indexOf(a.Articles_afterYear)}),o.switchYearFilter=function(){o.checkYear?e.addActivatedFilter(a.Articles_afterYear):e.removeActivatedFilter(a.Articles_afterYear),e.setFilterActivated(o.checkCheckboxes())},o.switchTypeFilter=function(){o.checkType?e.addActivatedFilter(a.Articles_types):e.removeActivatedFilter(a.Articles_types),e.setFilterActivated(o.checkCheckboxes())},o.isInSelectedTypes=function(e){return-1!=o.selectedArticleTypes.indexOf(e)},o.switchType=function(t){e.switchArticleType(t)},o.checkCheckboxes=function(){return o.checkYear||o.checkType?!0:!1},o.applyYearFilter=function(){e.setStartingPublicationYear(o.publicationYearV)}}]),myApp.controller("ArticlesOrderbyController",["CitationsFiltersManagerService","ORDER_BY","ArticlesFiltersManager","$rootScope",function(e,t,r,a){var n=this;r.checkOrder(),n.orderByF=r.getOrderBy(),n.sortF=r.getSort(),n.orderByV=n.orderByF.value,n.sortV=n.sortF.value,a.$on("$stateChangeSuccess",function(e,t,a,o,i){r.checkOrder(),n.orderByV=n.orderByF.value,n.sortV=n.sortF.value}),n.orderOptions=[t.publicationYear,t.title,t.globalCitations],n.applySort=function(){r.setSort(n.sortV)},n.applyOrderBy=function(){r.setOrderBy(n.orderByV)},n.toOptionName=function(e){switch(e){case t.publicationYear:return"Publication year";case t.title:return"Title";case t.globalCitations:return"Global citations"}}}]),myApp.controller("ArticlesResultsController",["$rootScope","ngDialog","ArticleManagerService","CitationsFiltersManagerService","RequestArticlesService","$scope","$timeout","$stateParams","SEARCH_TYPE","$sessionStorage","BookmarksManagerService","ORDER_BY","ArticlesFiltersManager","StatesManagerService",function(e,t,r,a,n,o,i,s,l,c,u,d,p,f){var m=this,g=new Date;if(e.showRefiningOptions.value=!0,m.$storage=c,m.year=g.getFullYear(),m.selectedArticleTypes=p.getSelectedArticleTypes(),m.activatedFilters=p.getFilterActivatedList(),m.activatedFiltersBool=p.getFilterActivatedBool(),!s.noReload)switch(s.searchType){case l.abstractSearch:r.getArticlesByAbstract(s.searchQuery,s.newSearch);break;case l.titleSearch:r.getArticlesByTitle(s.searchQuery,s.newSearch);break;case l.authorSearch:r.getArticlesByFullNameAuthor(s.searchQuery,s.newSearch);break;case l.singleArticleDoi:r.getSingleArticleByDoi(decodeURIComponent(s.doi),decodeURIComponent(s.title));break;case l.list:r.getArticlesFromList(decodeURIComponent(s.searchQuery),s.newSearch)}m.articles=r.getArticles(),m.resultsStates=r.getResultsStates(),m.publicationYear=d.publicationYear,m.title=d.title,m.globalCitations=d.globalCitations,m.totCitActs=d.totCitActs,m.publicationYearFil=a.getStartingPublicationYearF(),m.selfcitationsFil=a.getSelfCitationsF(),m.characterizationsFil=a.getCharacterizationsF(),m.authorsFil=a.getAuthorsF(),m.orderByFil=a.getOrderBy(),m.sortFil=a.getSort(),m.articlesOrderByFil=p.getOrderBy(),m.articlesSortByFil=p.getSort(),m.articlesPublicationYearFil=p.getStartingPublicationYearF(),m.isRequestPending=n.isRequestPending(),m.isRetrievingArticlesInfo=r.isRetrievingArticlesInfo(),m.articlesNum={value:m.articles.length},m.completedArticles={value:0},m.completedPercent={value:0},m.currentState="Results";var h;m.isRequestPending||0!=m.articles.length||t.open({template:"app/templates/dialog-empty-results.html",controller:["$rootScope","$scope",function(e,r){r.goToHomeSearch=function(){e.$state.go("app.home-search"),t.close()}}]}),m.getSearchText=function(){return n.getSearchString()},m.toOptionName=function(e){switch(e){case d.publicationYear:return"Publication year";case d.title:return"Title";case d.globalCitations:return"Global citations"}},o.$watchCollection(function(){return m.articles},function(){m.articlesNum.value=r.getArticlesNum()},!0),o.$watch(n.isRequestPending,function(){m.isRequestPending=n.isRequestPending(),m.isRequestPending?h=t.open({template:"app/templates/dialog-retrieving-results.html",closeByEscape:!0,showClose:!1,closeByDocument:!1}):(m.articlesNum.value=r.getArticlesNum(),h&&i(t.closeAll,1300),r.getArticlesResultsState()==m.resultsStates.NO_RESULTS&&(m.articlesNum.value=0,t.open({template:"app/templates/dialog-no-results.html"})),r.getArticlesResultsState()==m.resultsStates.RESULTS&&(m.articlesNum.value=r.getArticlesNum()))}),o.$watch(r.isRetrievingArticlesInfo,function(){m.isRetrievingArticlesInfo=r.isRetrievingArticlesInfo(),m.articlesNum.value=r.getArticlesNum(),m.isRetrievingArticlesInfo}),o.$watch(r.getCompletedArticles,function(){m.completedArticles.value=r.getCompletedArticles(),m.completedPercent.value=m.completedArticles.value/m.articlesNum.value*100}),m.logResults=function(){console.log(r.getArticles())},m.logStates=function(){console.log(f.getStates())}}]),myApp.controller("BookmarksController",["BookmarksManagerService","$rootScope","SEARCH_TYPE","ngDialog",function(e,t,r,a){"use strict";function n(){var e=[];for(var r in o.bookmarks)e.push(o.bookmarks[r].doi);return e.join(t.paramsTokensDelimiter)}var o=this,i=e.getBookmarksIDB();o.bookmarks=i.values,o.removeAllBookmarks=function(){e.deleteAllBookmarks()},o.getBookmarksLink=function(){var e=t.$state.href("app.articles-results",{list:n()},{absolute:!0});a.open({template:"app/templates/dialog-article-url",className:"ngdialog-theme-default-custom",data:{url:e}})}}]),myApp.controller("CitationDetailsDialogController",["$scope","$rootScope",function(e,t){var r=t.colorsMap,a=function(e,t,r){var a,n=0;for(var o in r)a=r[o],a.citingPubYear==e&&a.color==t&&n++;return n},n=function(e,t,r){for(var n,o=[],i=0;i<e.length;i++){n=e[i];var s={label:n,y:a(n,t,r)};o.push(s)}return o},o=function(e){var t,r=[],a=[],n="";for(var o in e)r.push(e[o].color);r.sort();for(var s=0;s<r.length;s++)t=r[s],t!==n?a.push({indexLabel:t,y:1,toolTipContent:"{indexLabel}: {y}",color:i(t)}):a[a.length-1].y++,n=t;return a},i=function(e){for(key in r)if(r[key].toString===e)return r[key].color},s=function(e){var t,r=[],a=[],o="";for(var s in e)a.push(e[s].color);a.sort();for(var l=0;l<a.length;l++)t=a[l],t!==o&&r.push(t),o=t;var c,u=[],d=[],p=0;for(var s in e)d.push(e[s].citingPubYear);d.sort(function(e,t){return e-t});for(var l=0;l<d.length;l++)c=d[l],c!==p&&u.push(c),p=c;var f=[];for(var s in r){var m={type:"stackedColumn",name:r[s],showInLegend:!0,dataPoints:n(u,r[s],e),color:i(r[s])};f.push(m)}return f},l=function(e){var t=s(e);t.push({});var r=new CanvasJS.Chart("stacked_chart",{axisY:{title:"cit"},toolTip:{shared:"true"},legend:{fontSize:20,fontFamily:"sans-serif"},animationEnabled:!0,animationDuration:2e3,data:t});r.render()},c=function(e){var t=o(e),r=new CanvasJS.Chart("donut_chart",{animationEnabled:!0,animationDuration:2e3,data:[{type:"doughnut",startAngle:-90,indexLabelFontSize:15,dataPoints:t}]});r.render()};e.$on("ngDialog.opened",function(){c(e.ngDialogData.articleData.citationsInfo),l(e.ngDialogData.articleData.citationsInfo)})}]),myApp.controller("CitationsFiltersController",["CitationsFiltersManagerService","$scope","$rootScope","FILTERS_TYPE",function(e,t,r,a){function n(){o.checkYear=-1!=s.indexOf(a.Citations_afterYear),o.checkSelfcitations=-1!=s.indexOf(a.Citations_selfCitations),o.checkAuthors=-1!=s.indexOf(a.Citations_authors),o.checkCharacterizations=-1!=s.indexOf(a.Citations_functions)}var o=this;o.publicationYearF=e.getStartingPublicationYearF(),o.selfcitationsF=e.getSelfCitationsF(),o.characterizationsF=e.getCharacterizationsF(),o.authorsF=e.getAuthorsF(),o.allAuthors=r.authors,o.selectedAuthor="",o.authorAlreadyInList=!1,o.inputNotValid=!1;var i=new Date;o.year=i.getFullYear(),e.checkFilters();var s=e.getFilterActivatedList();o.publicationYearV=o.publicationYearF.value,o.selfcitationsV=o.selfcitationsF.value,o.excludeSelfcitationsV=o.selfcitationsF.exclude,o.characterizationsV=o.characterizationsF.value,o.authorsV=o.authorsF.value,n(),r.$on("$stateChangeSuccess",function(t,r,a,i,s){e.checkFilters(),n(),o.publicationYearV=o.publicationYearF.value,o.authorsV=o.authorsF.value}),o.setColorsAllChecked=function(t){for(var r in o.characterizationsV)o.characterizationsV[r].checked=t,e.switchColorChecked(o.characterizationsV[r])},o.switchColorsFilter=function(){o.checkCharacterizations?(e.setCharacterizations(o.characterizationsV),e.addActivatedFilter(a.Citations_functions)):(o.setColorsAllChecked(!0),e.setCharacterizations(o.characterizationsV),e.removeActivatedFilter(a.Citations_functions)),e.setFilterActivated(o.checkCheckboxes())},o.switchColorChecked=function(t){e.switchColorChecked(t)},o.switchYearFilter=function(){o.checkYear?e.addActivatedFilter(a.Citations_afterYear):e.removeActivatedFilter(a.Citations_afterYear),e.setFilterActivated(o.checkCheckboxes())},o.switchSelfcitations=function(){o.checkSelfcitations?(o.selfcitationsV=!0,e.addActivatedFilter(a.Citations_selfCitations)):(o.selfcitationsV=!1,e.removeActivatedFilter(a.Citations_selfCitations)),e.setSelfCitations(o.selfcitationsV,o.excludeSelfcitationsV),e.setFilterActivated(o.checkCheckboxes())},o.switchAuthors=function(){o.checkAuthors?(e.setAuthorsEnabled(!0),e.addActivatedFilter(a.Citations_authors)):(e.setAuthorsEnabled(!1),e.removeActivatedFilter(a.Citations_authors)),e.setFilterActivated(o.checkCheckboxes())},o.checkCheckboxes=function(){return o.checkYear||o.checkSelfcitations||o.checkCharacterizations||o.checkAuthors?!0:!1},o.applyYearFilter=function(){
e.setStartingPublicationYear(o.publicationYearV)},o.updateAuthorFilter=function(){l(o.selectedAuthor)?(o.authorAlreadyInList=!0,console.log("autore già in lista")):c(o.selectedAuthor)?(o.inputNotValid=!1,o.authorAlreadyInList=!1,o.authorsV.push(o.selectedAuthor),e.setAuthors(o.authorsV)):(o.inputNotValid=!0,console.log("input non valido"))},o.removeAuthorFromFilter=function(t){for(var r in o.authorsV)o.authorsV[r]==t&&o.authorsV.splice(r,1);e.setAuthors(o.authorsV)},o.checkExcludeSelfCitations=function(e){return e&&o.excludeSelfcitationsV?!0:e&&!o.excludeSelfcitationsV?!1:!e&&o.excludeSelfcitationsV?!1:e||o.excludeSelfcitationsV?void 0:!0},o.switchExcludeSelfcitations=function(t){o.excludeSelfcitationsV=t,e.setSelfCitations(!0,o.excludeSelfcitationsV)},o.noCamelCase=function(e){return e.replace(/([A-Z])/g," $1").replace(/^./,function(e){return e.toUpperCase()})};var l=function(e){for(var t in o.authorsV)if(o.authorsV[t]==e)return!0;return!1},c=function(e){return angular.isDefined(e)&&""!=e}}]),myApp.controller("CitationsOrderbyController",["CitationsFiltersManagerService","ORDER_BY","$rootScope",function(e,t,r){var a=this;e.checkOrder(),a.orderByF=e.getOrderBy(),a.sortF=e.getSort(),a.orderByV=a.orderByF.value,a.sortV=a.sortF.value,r.$on("$stateChangeSuccess",function(t,r,n,o,i){e.checkOrder(),a.orderByV=a.orderByF.value,a.sortV=a.sortF.value}),a.orderOptions=[t.publicationYear,t.title,t.globalCitations,t.totCitActs],a.applySort=function(){e.setSort(a.sortV)},a.applyOrderBy=function(){e.setOrderBy(a.orderByV)},a.toOptionName=function(e){switch(e){case t.publicationYear:return"Publication year";case t.title:return"Title";case t.globalCitations:return"Global citations";case t.totCitActs:return"Citations by the article (only references)"}}}]),myApp.controller("HomeSearchController",["$rootScope","RequestArticlesService","ArticleManagerService","SEARCH_TYPE","$sessionStorage","Ping",function(e,t,r,a,n,o){var i=this,s=a.abstractSearch;i.authors=[],i.searchText="",i.searchTitle="",i.searchAuthor="",o.pingEndpoint();i.searchForArticles=function(){switch(t.setSearchString(i.searchText),s){case a.abstractSearch:i.searchText&&(n.searchQuery=i.searchText,e.$state.go("app.articles-results",{newSearch:!0,"abstract":n.searchQuery}));break;case a.titleSearch:i.searchTitle&&(n.searchQuery=i.searchTitle,e.$state.go("app.articles-results",{newSearch:!0,title:n.searchQuery}));break;case a.authorSearch:i.searchAuthor&&(n.searchQuery=i.searchAuthor,e.$state.go("app.articles-results",{newSearch:!0,author:n.searchQuery}))}},i.switchSearch=function(e){switch(e){case 0:s=a.abstractSearch;break;case 1:s=a.titleSearch;break;case 2:s=a.authorSearch}},i.refreshAuthors=function(t){i.authors.length=0;for(key in e.authors)e.authors[key].toUpperCase().startsWith(t.toUpperCase())&&i.authors.push(e.authors[key])},i.keyPressCallBack=function(e){i.searchForArticles(),e.preventDefault()}}]),myApp.controller("LeftNavbarController",["ngDialog",function(e){var t=this;t.openInfoDialog=function(){e.open({template:"app/templates/dialog-project-info.html",controller:["$rootScope","$scope",function(e,t){}]})}}]),myApp.controller("OffsidebarController",["$rootScope","$localStorage",function(e,t){var r=this;angular.isDefined(t.overlap)?r.overlap=e.offsidebarOverlap=t.overlap:t.overlap=r.overlap=e.offsidebarOverlap,e.$on("$stateChangeStart",function(t,r,a,n,o){$("body").removeClass(e.offsidebarOverlap?"offsidebar-open-overlap":"offsidebar-open")}),r.switchOffsidebarOverlap=function(){$("body").removeClass(e.offsidebarOverlap?"offsidebar-open-overlap":"offsidebar-open"),e.offsidebarOverlap=!e.offsidebarOverlap,t.overlap=e.offsidebarOverlap}}]),myApp.controller("RightNavbarController",["CitationsFiltersManagerService","ArticlesFiltersManager","$rootScope",function(e,t,r){var a=this;a.citationsFilterActivated=e.getFilterActivatedBool(),a.articlesFilterActivated=t.getFilterActivatedBool(),a.showRefiningOptions=r.showRefiningOptions,r.$on("$stateChangeStart",function(e,t,r,n,o){a.showRefiningOptions.value="app.articles-results"==t.name?!0:!1}),a.checkOffsidebarOverlap=function(){return r.offsidebarOverlap?"offsidebar-open-overlap":"offsidebar-open"}}]),myApp.controller("SettingsController",["$rootScope","$localStorage","$sessionStorage","EndpointsManager",function(e,t,r,a){"use strict";var n=this;n.endpoints=a.getEndpoints(),n.selectedEndpoint=a.getSelectedEndpoint(),n.newEndpoint="",n.isSelectedEndpoint=function(e){return e===n.selectedEndpoint},n.removeEndpoint=function(e){a.removeEndpoint(e)},n.addEndpoint=function(){a.addEndpoint(n.newEndpoint),n.newEndpoint=""},n.setSelectedEndpoint=function(e){a.setSelectedEndpoint(e)},n.clearLocalStorage=function(){t.$reset()},n.clearSessionStorage=function(){r.$reset()}}]),myApp.controller("testController",["$rootScope","ngDialog","ArticleManagerService","CitationsFiltersManagerService","RequestArticlesService","$scope","$timeout","$stateParams","SEARCH_TYPE","$sessionStorage","BookmarksManagerService","ORDER_BY","ArticlesFiltersManager","$location",function(e,t,r,a,n,o,i,s,l,c,u,d,p,f){var m=this;m.params=s,console.log(m.params),m.changeParam=function(){f.search("param0","foo")}}]),myApp.directive("articleItem",["ngDialog","ArticleManagerService","$rootScope","BookmarksManagerService","SEARCH_TYPE",function(e,t,r,a,n){"use strict";return{restrict:"E",templateUrl:"app/templates/article-item.html",scope:{articleData:"=",articleIndex:"@",yearFilter:"=",orderFilter:"=",sortFilter:"=",selfcitationFilter:"=",characterizationsFilter:"=",authorsFilter:"=",checkBookmark:"=",showDetails:"="},link:function(o,i,s){function l(e){e.citationsDetails||t.getCitationsInfo(e.expression.value,e.authors),e.biblioDetails||t.getBiblioInfo(e.expression.value,e.authors)}o.articleIsCollapsed=!0;var c=!1;o.checkBookmark.value&&a.checkBookmarked(o.articleData),o.toggleArticleDetails=function(e){o.articleIsCollapsed=!o.articleIsCollapsed,o.articleIsCollapsed||(c=!c,l(e))},o.toggleBookmark=function(e){e.bookmark&&0!=e.bookmark?(e.bookmark=!1,a.deleteBookmark(e)):(e.bookmark=!0,e.citationsDetails&&e.biblioDetails?e.citationsDetails&&e.biblioDetails&&a.saveBookmark(o.articleData):l(e))},o.availableIssue=function(e){return e.hasOwnProperty("issueNumber")&&e.hasOwnProperty("volumeNumber")},o.showCitDetails=function(){e.open({template:"app/templates/dialog-citations-details.html",controller:"CitationDetailsDialogController",className:"ngdialog-theme-default-custom",data:{articleData:o.articleData,citDonutChartId:"donut_chart",citStackedChartId:"stackedColumn_chart"}})},o.exploreAuthor=function(e,t){r.$state.go("app.author-articles",{newSearch:!1,searchType:n.authorSearch,searchQuery:e+" "+t,authorId:e+" "+t},{inherit:r.inheritUrlParams})},o.getArticleLink=function(){var t=r.$state.href("app.article-doi",{doi:o.articleData.doi},{absolute:!0});e.open({template:"app/templates/dialog-article-url",className:"ngdialog-theme-default-custom",data:{url:t}})},o.getCitationsMinYear=function(){var e=o.articleData.biblioInfo[0].publicationYear;for(var t in o.articleData.biblioInfo)o.articleData.biblioInfo[t].publicationYear<e&&(e=o.articleData.biblioInfo[t].publicationYear);return e},o.getCitationsMaxYear=function(){var e=o.articleData.biblioInfo[0].publicationYear;for(var t in o.articleData.biblioInfo)o.articleData.biblioInfo[t].publicationYear>e&&(e=o.articleData.biblioInfo[t].publicationYear);return e},o.checkBookmark.value&&(o.$watch(function(){return o.articleData.biblioInfo},function(){o.articleData.bookmark&&a.saveBookmark(o.articleData)},!0),o.$watch(function(){return o.articleData.citingArticles},function(){o.articleData.bookmark&&a.saveBookmark(o.articleData)},!0))}}}]),myApp.directive("biblioItem",["ngDialog","$modal","ArticleManagerService","$rootScope","SEARCH_TYPE",function(e,t,r,a,n){"use strict";return{restrict:"E",templateUrl:"app/templates/biblio-item.html",scope:{biblioIndex:"@",itemData:"=",citingArticleAuthors:"="},link:function(t,r,o){t.exploreBiblioItem=function(){a.$state.go("app.article-doi",{doi:t.itemData.doi.value,title:t.itemData.title},{inherit:a.inheritUrlParams})},t.getArticleLink=function(){var r=a.$state.href("app.article-doi",{doi:t.itemData.doi.value},{absolute:!0});e.open({template:"app/templates/dialog-article-url",className:"ngdialog-theme-default-custom",data:{url:r}})},t.exploreAuthor=function(e,t){a.$state.go("app.author-articles",{newSearch:!1,searchType:n.authorSearch,searchQuery:e+" "+t,authorId:e+" "+t},{inherit:a.inheritUrlParams})},t.isSharedAuthor=function(e){for(var r in t.citingArticleAuthors)if(t.citingArticleAuthors[r].fullName===e.fullName)return!0;return!1},t.openAbstractDialog=function(){e.open({template:"/app/templates/dialog-abstract.html",className:"ngdialog-theme-default-custom",data:{absText:t.itemData.abstractTxt.value,title:t.itemData.title}})},t.openMotivationsDialog=function(){e.open({template:"/app/templates/dialog-motivations-references.html",controller:i,className:"ngdialog-theme-default-custom",data:{citActsInfo:t.itemData.citActsInfo,title:t.itemData.title}})};var i=["$scope",function(e){e.$storage={},e.empInTxtRefPointer=function(e,t){var r=e.replace(t,"<span class='irp'><b>"+t+"</b></span>");return r},e.generateId=function(t){var r="motivation_"+t+Math.floor(1e5*Math.random()+1),a=angular.fromJson(e.$storage.panelState);return a||(a={}),a[r]=!0,e.$storage.panelState=angular.toJson(a),r}}]},controller:["$scope","$element",function(e,t){e.biblioId="biblio_"+Date.now(),e.chartId="donut_"+Date.now()}]}}]),myApp.directive("breadcrumb",["StatesManagerService","$rootScope","SEARCH_TYPE",function(e,t,r){"use strict";return{restrict:"E",templateUrl:"app/templates/breadcrumb.html",scope:{},link:function(a){a.states=e.getStates(),a.types=r,a.changeState=function(r,a){if(!a){var n=e.getState(r);t.$state.go(n.name,n.params)}}}}}]),myApp.directive("citingItem",["ngDialog","ArticleManagerService","$rootScope","SEARCH_TYPE",function(e,t,r,a){"use strict";return{restrict:"E",templateUrl:"app/templates/citing-item.html",scope:{citingIndex:"@",itemData:"=",citedArticleAuthors:"="},link:function(t,n,o){t.$storage={},t.emphasizeInTxtRefPointer=function(e,t){var r=e.replace(t,"<span class='irp'><b>"+t+"</b></span>");return r},t.generateId=function(e){var r="motivation_"+e+Math.floor(1e5*Math.random()+1),a=angular.fromJson(t.$storage.panelState);return a||(a={}),a[r]=!0,t.$storage.panelState=angular.toJson(a),r},t.getArticleLink=function(){var a=r.$state.href("app.article-doi",{doi:t.itemData.doi.value},{absolute:!0});e.open({template:"app/templates/dialog-article-url",className:"ngdialog-theme-default-custom",data:{url:a}})},t.exploreCitingItem=function(){r.$state.go("app.article-doi",{doi:t.itemData.doi.value,title:t.itemData.title.value},{inherit:r.inheritUrlParams})},t.exploreAuthor=function(t,n){e.closeAll(),r.$state.go("app.author-articles",{newSearch:!1,searchType:a.authorSearch,searchQuery:t+" "+n,authorId:t+" "+n},{inherit:r.inheritUrlParams})},t.isSharedAuthor=function(e){for(var r in t.citedArticleAuthors)if(t.citedArticleAuthors[r].fullName===e.fullName)return!0;return!1},t.openAbstractDialog=function(){e.open({template:"/app/templates/dialog-abstract.html",className:"ngdialog-theme-default-custom",data:{absText:t.itemData.abstractTxt.value,title:t.itemData.title}})},t.openMotivationsDialog=function(){e.open({template:"/app/templates/dialog-motivations-citing.html",controller:i,className:"ngdialog-theme-default-custom",data:{motivations:t.itemData.motivations,title:t.itemData.title}})};var i=["$scope",function(e){e.$storage={},e.empInTxtRefPointer=function(e,t){var r=e.replace(t,"<span class='irp'><b>"+t+"</b></span>");return r},e.generateId=function(t){var r="motivation_"+t+Math.floor(1e5*Math.random()+1),a=angular.fromJson(e.$storage.panelState);return a||(a={}),a[r]=!0,e.$storage.panelState=angular.toJson(a),r}}]},controller:["$scope","$element",function(e,t){e.citingId="citing_"+Date.now()}]}}]),myApp.directive("donutChart",["$rootScope","$timeout",function(e,t){"use strict";return{restrict:"E",templateUrl:"app/templates/donut-chart.html",scope:{itemData:"=",chartId:"="},link:function(r,a,n){r.parentHeight=a.parent().height();var o=e.colorsMap,i=function(e,t){var r=[];for(var a in e)r.push({y:e[a].numCitActs,indexLabel:e[a].color,toolTipContent:"{indexLabel}: {y}",color:o[e[a].colorURI].color});return r};r.renderChart=function(){if($("#"+r.chartId).length>0){var e=i(r.itemData.citActsInfo,r.itemData.totCitActs),t=0;for(var a in e)t+=e[a].y;var n=new CanvasJS.Chart(r.chartId,{height:230,animationEnabled:!0,animationDuration:1e3,title:{text:t.toString(),horizontalAlign:"center",verticalAlign:"center",fontSize:40,dockInsidePlotArea:!0,fontColor:"#656565"},data:[{type:"doughnut",startAngle:-90,indexLabelFontSize:16,dataPoints:e}]});n.render()}},r.$watch("itemData.citActsInfo",function(e,a){r.itemData.citActsInfo&&t(r.renderChart,1e3)})}}}]),myApp.filter("afterYear",function(){return function(e,t){if(!angular.isUndefined(e)&&!angular.isUndefined(t)&&angular.isArray(e)){for(var r,a=[],n=0;n<e.length;n++)r=e[n],r.publicationYear>=t&&a.push(r);return a}return e}}).filter("selfcitation",function(){return function(e,t,r){if(0==t)return e;if(!angular.isUndefined(e)&&!angular.isUndefined(t)){var a,n=[];switch(r){case!0:for(var o=0;o<e.length;o++)a=e[o],0==a.isSelfcitation&&n.push(a);return n;case!1:for(var o=0;o<e.length;o++)a=e[o],1==a.isSelfcitation&&n.push(a);return n}}return e}}).filter("characterizations",function(){return function(e,t){if(!angular.isUndefined(e)&&!angular.isUndefined(t)){var r,a,n=[];for(var o in e)if(r=e[o],a=r.citActsInfo,!angular.isUndefined(a)&&a.length>0){for(var i in a)if(1==t[a[i].colorURI].checked){n.push(r);break}}else n.push(r);return n}return e}}).filter("authors",function(){return function(e,t,r){if(!angular.isUndefined(e)&&!angular.isUndefined(t)&&r){var a,n,o=[];for(var i in e){a=e[i],n=a.authors;for(var s in n)if(t.indexOf(n[s].fullName)>-1){o.push(a);break}}return o}return e}}).filter("articleType",function(){return function(e,t){if(!angular.isUndefined(e)&&!angular.isUndefined(t)){var r,a,n=[];for(var o in e)r=e[o],a=r.type,a&&-1==t.indexOf(a)||n.push(r);return n}return e}}),myApp.factory("ArticlesFiltersManager",["ORDER_BY","SORT","ARTICLE_TYPES","FILTERS_TYPE","$stateParams","$location","StatesManagerService","$rootScope",function(e,t,r,a,n,o,i,s){function l(t){for(var r in e)if(e[r]==t)return!0;return!1}function c(e){for(var r in t)if(r==e)return!0;return!1}function u(e){return!isNaN(parseInt(e))&&parseInt(e)>=1950&&parseInt(e)<=(new Date).getFullYear()}function d(e){var t=e.split(s.paramsTokensDelimiter);for(var a in t){var n=!1;for(var o in r)if(r[o]==t[a]){n=!0;break}if(!n)return!1}return!0}var p={value:!1},f=[],m=1950,g=e.publicationYear,h=t.desc,v={value:g},A={value:h},b=[r.JournalArticle,r.JournalReviewArticle,r.JournalEditorial,r.ConferencePaper,r.Letter,r.Article],S=[r.Article,r.JournalArticle,r.JournalReviewArticle,r.JournalEditorial,r.Letter,r.ConferencePaper],C={value:m},y=function(){p.value=!1,f.length=0,v.value=g,A.value=h,C.value=m,S.length=0;for(var e in b)S.push(b[e])},k=function(){n.orderBy&&l(n.orderBy)?v.value=n.orderBy:n.orderBy&&!l(n.orderBy)&&console.error("Invalid 'orderBy' parameter")},$=function(){n.sort&&c(n.sort)?A.value=t[n.sort]:n.sort&&!c(n.sort)&&console.error("Invalid 'sort' parameter")},w=function(){n[a.Articles_afterYear]&&u(n[a.Articles_afterYear])?(p.value=!0,f.push(a.Articles_afterYear),C.value=parseInt(n[a.Articles_afterYear])):n[a.Articles_afterYear]&&!u(n[a.Articles_afterYear])&&console.error("Invalid 'afterYear' parameter")},T=function(){if(n[a.Articles_types]&&d(n[a.Articles_types])){p.value=!0,f.push(a.Articles_types);var e=n.type.split(s.paramsTokensDelimiter);S.length=0;for(var t in e)S.push(e[t])}else n[a.Articles_types]&&!d(n[a.Articles_types])&&console.error("Invalid 'type' parameter")},E=function(e,t){o.search(e,t),i.updateCurrentStateParam(e,t)};return s.$on("$stateChangeStart",function(e,t,r,a,n){y()}),{getOrderBy:function(){return v},getSort:function(){return A},setOrderBy:function(e){v.value=e,E("orderBy",e)},setSort:function(e){A.value=e;for(var r in t)t[r]==e&&E("sort",r)},getArticleTypes:function(){return b},getSelectedArticleTypes:function(){return S},switchArticleType:function(e){var t=S.indexOf(e);-1==t?S.push(e):S.splice(t,1),E(a.Articles_types,S.join(s.paramsTokensDelimiter))},getStartingPublicationYearF:function(){return C},setStartingPublicationYear:function(e){C.value=e,E(a.Articles_afterYear,e)},setFilterActivated:function(e){p.value=e},getFilterActivatedBool:function(){return p},addActivatedFilter:function(e){f.push(e)},removeActivatedFilter:function(e){switch(f.splice(f.indexOf(e),1),i.updateCurrentStateParam(e,void 0),o.search(e,null),e){case a.Articles_types:S.length=0,S.push.apply(S,b);break;case a.Articles_afterYear:C.value=m}},getFilterActivatedList:function(){return f},checkFilters:function(){w(),T()},checkOrder:function(){k(),$()}}}]),myApp.factory("ArticleManagerService",["RequestArticlesService","CitationsFiltersManagerService","ArticlesInfoService","StatesManagerService","AuthorInfoService","ngDialog","$rootScope","$sessionStorage","SEARCH_TYPE","ARTICLE_TYPES",function(e,t,r,a,n,o,i,s,l,c){var u=[];s.searchResults||(s.searchResults=[]);var d=i.colorsMap,p=!1,f=0,m=0,g={NOT_AVAILABLE:0,RESULTS:1,NO_RESULTS:2},h=g.NOT_AVAILABLE,v=function(e){return angular.isString(e)?parseInt(e):e},A=function(e){r.getArticleType(e.expression.value).then(function(t){if(t.data.results.bindings[0]){var r=t.data.results.bindings[0].type.value;switch(r){case"http://purl.org/spar/fabio/JournalArticle":e.type=c.JournalArticle;break;case"http://purl.org/spar/fabio/ConferencePaper":e.type=c.ConferencePaper;break;case"http://purl.org/spar/fabio/JournalReviewArticle":e.type=c.JournalReviewArticle;break;case"http://purl.org/spar/fabio/JournalEditorial":e.type=c.JournalEditorial;break;case"http://purl.org/spar/fabio/Letter":e.type=c.Letter;break;default:e.type=c.Article}}else e.type=c.Article},function(e){console.error("Error. "+e.status+": "+e.statusText)})},b=function(e){var t=0;for(var r in e)t+=e[r].numCitActs;return t},S=function(e){return d[e].toString},C=function(e){var t=[];for(var r in e)e[r].colorURI=e[r].color.value,e[r].color=S(e[r].color.value);e.sort(function(e,t){return e.color<t.color?-1:e.color>t.color?1:0});for(var a,n={color:""},o=0;o<e.length;o++){var a=e[o];a.color!==n.color?t.push({colorURI:a.colorURI,color:a.color,numCitActs:1,inTextRefPointers:[{irpTxt:a.irpTxt.value,sentenceTxt:a.sentenceTxt.value}]}):(t[t.length-1].numCitActs++,t[t.length-1].inTextRefPointers.push({irpTxt:a.irpTxt.value,sentenceTxt:a.sentenceTxt.value})),n=a}return t},y=function(e,t){r.getCitationActsInfoNotGrouped(e,t.citedExpression.value).then(function(e){var r=e.data.results.bindings;t.citActsInfo=C(r),t.totCitActs=b(t.citActsInfo)},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},k=function(e,t,r){return""==e.data||!e.data[t][r]},$=function(e,t){if(void 0!==t&&void 0!==e.authors){e.sharedAuthors=[],e.isSelfcitation=!1;var r;for(var a in e.authors){r=e.authors[a];for(var n in t)t[n].fullName===r.fullName&&(e.isSelfcitation=!0,e.sharedAuthors.push(r.fullName))}}else alert("Non è stato possibile stabilire se '"+e.title+"' sia una autocitazione")},w=function(e){r.getArticleAuthors(e.authorsList.value).then(function(t){e.authors=t.data.results.bindings;for(var r in e.authors)e.authors[r].fullName=e.authors[r].fullName.value},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},T=function(e,t,a){r.getArticleAuthors(e.authorsList.value).then(function(r){e.authors=r.data.results.bindings;for(var a in e.authors)e.authors[a].fullName=e.authors[a].fullName.value;$(e,t)},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},E=function(e,t,r){var a=[];for(var n in r)r[n].citingExp.value==t&&r[n].color==e&&a.push({irpTxt:r[n].irpTxt,sentenceTxt:r[n].sentenceTxt});return a},R=function(e,t){e.motivations=[];var r,a=[],n="";for(var o in t)t[o].citingExp.value==e.citingExp.value&&a.push(t[o].color);a.sort();for(var i=0;i<a.length;i++)r=a[i],r!==n&&e.motivations.push({colorStr:r,inTextRefPointers:E(r,e.citingExp.value,t)}),n=r},I=function(e,t,a,n){return r.requestCitingArticles(t).then(function(t){e.citingArticles=t.data.results.bindings,1!=e.citingArticles.length||e.citingArticles[0].doi||(e.citingArticles=[]);for(var r in e.citingArticles){var o=e.citingArticles[r];o.publicationYear=parseInt(o.publicationYear.value),o.globalCitations=v(o.globalCountValue.value),o.title=o.title.value,T(o,a,!1),R(o,n)}},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},F=function(e,t){r.getArticleGeneralInfo(e).then(function(e){var a=e.data.results.bindings[0];a.publicationYear=v(a.publicationYear.value),a.title=a.title.value,a.doi=a.doi.value,a.globalCitations=v(a.globalCountValue.value),a.citationsDetails=!1,a.biblioDetails=!1,a.bookmark=!1,w(a),A(a),r.getArticleIncomingCitationsInfo(a.expression.value).then(function(e){a.inCitActs=e.data.results.bindings[0].numCitActs.value,a.inNumCites=e.data.results.bindings[0].numCites.value},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)}),r.getArticleOutgoingCitationsInfo(a.expression.value).then(function(e){a.outCitActsNum=e.data.results.bindings[0].numCitActs.value,a.citedArticlesNum=e.data.results.bindings[0].numCites.value},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)}),u.push(a),t&&s.searchResults.push(a)},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},x=function(){o.open({template:"app/templates/dialog-error.html",controller:["$rootScope","$scope",function(e,t){}]})},D=function(e,t,r){var n=a.getStateIndex(e,t);-1==n?a.saveState(e,t,r):a.restoreState(n)};return{getArticles:function(){return u},getColorsMap:function(){return d},isRetrievingArticlesInfo:function(){return p},setCompletedRetrievingArticlesInfo:function(){p=!1},getArticlesNum:function(){return f},getCompletedArticles:function(){return m=u.length},getResultsStates:function(){return g},getArticlesResultsState:function(){return h},getCitationsInfo:function(e,t){return r.requestCitationsInfo(e).then(function(r){var a=r.data.results.bindings;for(var n in a)a[n].color=d[a[n].color.value].toString,a[n].citingPubYear=v(a[n].citingPubYear.value),a[n].irpTxt=a[n].irpTxt.value,a[n].sentenceTxt=a[n].sentenceTxt.value;for(var o in u){var i=u[o];if(i.expression.value==e){i.citationsInfo=a,i.citationsDetails=!0,I(i,e,t,a);break}}},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},getBiblioInfo:function(e,t){r.requestBiblioInfo(e).then(function(r){var a=r.data.results.bindings;1!=a.length||a[0].doi||(a=[]);for(var n in a)a[n].title=a[n].title.value,a[n].publicationYear=v(a[n].publicationYear.value),a[n].globalCountDate=a[n].globalCountDate.value,a[n].globalCitations=v(a[n].globalCountValue.value),T(a[n],t,!0),y(e,a[n]);for(var o in u){var i=u[o];if(i.expression.value==e){i.biblioInfo=a,i.biblioDetails=!0;break}}},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},getArticlesByAbstract:function(t,r){return r?(a.removeAllStates(),a.saveState(l.abstractSearch,t,t)):D(l.abstractSearch,t,t),e.searchArticles(t).then(function(t){u.length=0,s.searchResults.length=0;var r="http://stanbol.apache.org/ontology/entityhub/query#QueryResultSet",a="http://stanbol.apache.org/ontology/entityhub/query#queryResult",n=null;if(k(t,r,a))h=g.NO_RESULTS,console.log("NO RESULTS!"),n=[],e.setCompletedRequest();else{h=g.RESULTS,n=t.data[r][a],f=n.length,m=u.length,e.setCompletedRequest(),p=!0;for(var o in n)F(n[o].value,!0),u.length==n.length&&(p=!1)}},function(t){s.searchResults.length=0,e.setCompletedRequest(),x()})},getSingleArticle:function(t){e.setPendingRequest(),D(l.singleArticle,t,t),r.getArticle(t).then(function(a){if(u.length=0,0==a.data.results.bindings.length)h=g.NO_RESULTS,console.log("NO RESULTS!"),e.setCompletedRequest();else{h=g.RESULTS;var n=a.data.results.bindings[0];n.publicationYear=v(n.publicationYear.value),n.title=t,n.doi=n.doi.value,n.globalCountValue=v(n.globalCountValue.value),u.push(n),f=1,m=1,e.setCompletedRequest(),w(n),A(n),r.getArticleIncomingCitationsInfo(n.expression.value).then(function(e){n.inCitActs=e.data.results.bindings[0].numCitActs.value,n.inNumCites=e.data.results.bindings[0].numCites.value},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)}),r.getArticleOutgoingCitationsInfo(n.expression.value).then(function(e){n.outCitActsNum=e.data.results.bindings[0].numCitActs.value,n.citedArticlesNum=e.data.results.bindings[0].numCites.value},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})}},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},setArticlesResults:function(e){var t=a.restoreState(e);angular.copy(t.articles,u),f=u.length,m=u.length},ResetSearchResults:function(){angular.copy(s.searchResults,u),f=u.length,m=u.length,a.removeAllStates()},getArticlesByTitle:function(t,n){return e.setPendingRequest(),n?(a.removeAllStates(),a.saveState(l.titleSearch,t,t)):D(l.titleSearch,t,t),r.requestArticlesByTitle(t).then(function(t){u.length=0,s.searchResults.length=0;var r=null;if(0==t.data.results.bindings.length)h=g.NO_RESULTS,console.log("NO RESULTS!"),r=[],e.setCompletedRequest();else{h=g.RESULTS;var a=t.data.results.bindings;r=t.data.results.bindings,f=a.length,m=u.length,e.setCompletedRequest();for(var n in r)F(r[n].work.value,!0),u.length==r.length&&(p=!1)}},function(t){s.searchResults.length=0,e.setCompletedRequest(),x()})},getArticlesFromList:function(t,n){e.setPendingRequest();var o=t.split(i.paramsTokensDelimiter),c="List "+Math.floor(1e4*Math.random()+1);n?(a.removeAllStates(),a.saveState(l.list,c,c)):D(l.list,c,c);var d=function(t){r.getArticleByDoi(t).then(function(a){if(0==a.data.results.bindings.length)h=g.NO_RESULTS,console.log("NO RESULTS!");else{h=g.RESULTS;var n=a.data.results.bindings[0];n.publicationYear=v(n.publicationYear.value),n.title=n.title.value,n.doi=t,n.globalCountValue=v(n.globalCountValue.value),u.push(n),e.setCompletedRequest(),w(n),A(n),r.getArticleIncomingCitationsInfo(n.expression.value).then(function(e){n.inCitActs=e.data.results.bindings[0].numCitActs.value,n.inNumCites=e.data.results.bindings[0].numCites.value},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)}),r.getArticleOutgoingCitationsInfo(n.expression.value).then(function(e){n.outCitActsNum=e.data.results.bindings[0].numCitActs.value,n.citedArticlesNum=e.data.results.bindings[0].numCites.value},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})}},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})};u.length=0,s.searchResults.length=0,f=o.length,m=u.length;for(var p in o)d(o[p])},getSingleArticleByDoi:function(t,a){e.setPendingRequest(),D(l.singleArticleDoi,t,""!=a?a:t),r.getArticleByDoi(t).then(function(a){if(u.length=0,0==a.data.results.bindings.length)h=g.NO_RESULTS,console.log("NO RESULTS!"),e.setCompletedRequest();else{h=g.RESULTS;var n=a.data.results.bindings[0];n.publicationYear=v(n.publicationYear.value),n.title=n.title.value,n.doi=t,n.globalCitations=v(n.globalCountValue.value),u.push(n),f=1,m=1,e.setCompletedRequest(),w(n),A(n),r.getArticleIncomingCitationsInfo(n.expression.value).then(function(e){n.inCitActs=e.data.results.bindings[0].numCitActs.value,n.inNumCites=e.data.results.bindings[0].numCites.value},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)}),r.getArticleOutgoingCitationsInfo(n.expression.value).then(function(e){n.outCitActsNum=e.data.results.bindings[0].numCitActs.value,n.citedArticlesNum=e.data.results.bindings[0].numCites.value},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})}},function(e){console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},getArticlesByAuthor:function(e,t){this.getArticlesByFullNameAuthor(e+" "+t,!1)},getArticlesByFullNameAuthor:function(t,r){return e.setPendingRequest(),r?(a.removeAllStates(),a.saveState(l.authorSearch,t,t)):D(l.authorSearch,t,t),n.requestFullNameAuthorArticles(t).then(function(t){u.length=0;var a=null;if(0==t.data.results.bindings.length)h=g.NO_RESULTS,console.log("NO RESULTS!"),e.setCompletedRequest();else{h=g.RESULTS,a=t.data.results.bindings,f=a.length,m=u.length,e.setCompletedRequest(),p=!0;for(var n in a)F(a[n].work.value,r),u.length==a.length&&(p=!1)}},function(e){s.searchResults.length=0,console.error("Error while fetching articles. "+e.status+": "+e.statusText)})},reloadSearchResult:function(e){for(var t in u)u[t].doi==e.doi&&(u[t]=e)}}}]),myApp.factory("BookmarksManagerService",["ArticleManagerService","$rootScope",function(e,t){function r(){s.getAll(function(e){angular.copy(e,n.values),t.$apply()})}function a(){var e=window.indexedDB.deleteDatabase(i+o);e.onerror=function(e){console.log("Error deleting database.")},e.onsuccess=function(e){console.log("Database deleted successfully")}}var n={values:[]},o="BookmarksStore",i="BEX-",s=new IDBStore({storeName:o,storePrefix:i,keyPath:"doi",autoIncrement:!1,dbVersion:3,onError:function(e){console.error(e)},onStoreReady:r});return{saveBookmark:function(e){s.put(e,function(){r()},function(e){console.log(e)})},deleteBookmark:function(t){function a(e){e!==!1&&r()}function n(e){console.error(e)}e.reloadSearchResult(t),s.remove(t.doi,a,n)},getBookmark:function(e){s.get(e,function(e){return e},function(){return null})},getBookmarksIDB:function(){return n},deleteAllBookmarks:function(){var t=function(){r()},a=function(e){console.log("CLEAN error",e)};for(var o in n.values)n.values[o].bookmark=!1,e.reloadSearchResult(n.values[o]);n.values.length=0,s.clear(t,a)},checkBookmarked:function(e){s.get(e.doi,function(t){e.bookmark=t?!0:!1},function(t){console.error(t),e.bookmark=!1})},deleteBookmarksStore:function(){a()}}}]),myApp.factory("CitationsFiltersManagerService",["ArticlesInfoService","$stateParams","$location","ORDER_BY","StatesManagerService","$rootScope","SORT","FILTERS_TYPE",function(e,t,r,a,n,o,i,s){function l(e){for(var t in a)if(a[t]==e)return!0;return!1}function c(e){for(var t in i)if(t==e)return!0;return!1}function u(e){return!isNaN(parseInt(e))&&parseInt(e)>=1950&&parseInt(e)<=(new Date).getFullYear()}function d(e){return"exclude"==e||"isolate"==e}function p(e){return!0}function f(e){var t=e.split(o.paramsTokensDelimiter);for(var r in t){var a=!1;for(var n in C)if(C[n]==t[r]){a=!0;break}if(!a)return!1}return!0}function m(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}var g={value:!1},h=[],v=1950,A="http://purl.org/spar/cito/",b={value:v},S={value:!1,exclude:!0},C=["citesForInformation","citesAsMetadataDocument","citesAsDataSource","citesAsAuthority","obtainsSupportFrom","includesExcerptFrom","confirms","containsAssertionFrom","derides","includesQuotationFrom","citesAsRelated","usesMethodIn","documents","describes","usesConclusionsFrom","repliesTo","qualifies","corrects","agreesWith","citesAsEvidence","usesDataFrom","parodies","critiques","compiles","speculatesOn","extends","citesAsSourceDocument","updates","discusses","citesAsPotentialSolution","obtainsBackgroundFrom","reviews","supports","citesAsRecommendedReading","credits","disagreesWith","plagiarizes"],y=angular.copy(C),k={value:{}};for(var $ in C)k.value[A+C[$]]={},k.value[A+C[$]].toString=C[$],k.value[A+C[$]].valueURI=A+C[$],k.value[A+C[$]].checked=!0;var w={value:[],enabled:!1},T={value:[]},E=a.publicationYear,R=!0,I={value:E},F={value:R},x=function(){g.value=!1,h.length=0,I.value=E,F.value=R,b.value=v,S.value=!1,S.exclude=!0,
w.value.length=0,w.enabled=!1},D=function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0},B=function(){t.orderCitBy&&l(t.orderCitBy)?I.value=t.orderCitBy:t.orderCitBy&&!l(t.orderCitBy)&&console.error("Invalid 'orderCitBy' parameter")},P=function(){t.sortCit&&c(t.sortCit)?F.value=i[t.sortCit]:t.sortCit&&!c(t.sortCit)&&console.error("Invalid 'sortCit' parameter")},M=function(){t[s.Citations_afterYear]&&u(t[s.Citations_afterYear])?(g.value=!0,h.push(s.Citations_afterYear),b.value=parseInt(t[s.Citations_afterYear])):t[s.Citations_afterYear]&&!u(t[s.Citations_afterYear])&&console.error("Invalid 'citAfterYear' parameter")},j=function(){t[s.Citations_selfCitations]&&d(t[s.Citations_selfCitations])?(g.value=!0,h.push(s.Citations_selfCitations),S.value=!0,S.exclude="exclude"==t[s.Citations_selfCitations]?!0:!1):t[s.Citations_selfCitations]&&!d(t[s.Citations_selfCitations])&&console.error("Invalid 'selfCitations' parameter")},_=function(){if(t[s.Citations_authors]&&p(t[s.Citations_authors])){g.value=!0,h.push(s.Citations_authors);var e=t.citAuthors.split(o.paramsTokensDelimiter);for(var r in e)e[r]=m(e[r]);w.enabled=!0,w.value=e}else t[s.Citations_authors]&&!p(t[s.Citations_authors])&&console.error("Invalid 'citAuthors' parameter")},N=function(){if(t[s.Citations_functions]&&f(t[s.Citations_functions])){g.value=!0,h.push(s.Citations_functions),y=t.citFunctions.split(o.paramsTokensDelimiter);for(var e in k.value)k.value[e].checked=!1;for(var e in y)k.value[A+y[e]].checked=!0}else t[s.Citations_functions]&&!f(t[s.Citations_functions])&&console.error("Invalid 'citFunctions' parameter")},Y=function(e,t){r.search(e,t),n.updateCurrentStateParam(e,t)};return o.$on("$stateChangeStart",function(e,t,r,a,n){x()}),{getFilterActivatedBool:function(){return g},setFilterActivated:function(e){g.value=e},getStartingPublicationYearF:function(){return b},setStartingPublicationYear:function(e){b.value=e,Y(s.Citations_afterYear,e)},getAuthorsF:function(){return w},setAuthors:function(e){w.value=e,Y(s.Citations_authors,w.value.join(o.paramsTokensDelimiter))},setAuthorsEnabled:function(e){w.enabled=e,w.enabled?Y(s.Citations_authors,w.value.join(o.paramsTokensDelimiter)):w.value.length=0},getAllArticlesAuthors:function(){return D(T.value)&&e.getAllAuthors().then(function(e){var t=e.data.results.bindings;for(var r in t)T.value.push(t[r].fullName.value)},function(e){console.error("Error while fetching authors. "+e.status+": "+e.statusText)}),T},getSelfCitationsF:function(){return S},setSelfCitations:function(e,t){S.value=e,S.exclude=t,S.value&&Y(s.Citations_selfCitations,t?"exclude":"isolate")},getCharacterizationsF:function(){return k},setCharacterizations:function(e){k.value=e,Y(s.Citations_functions,y.join(o.paramsTokensDelimiter))},switchColorChecked:function(e){if(e.checked)y.push(e.toString);else{var t=y.indexOf(e.toString);-1!=t&&y.splice(t,1)}Y(s.Citations_functions,y.join(o.paramsTokensDelimiter))},getOrderBy:function(){return I},setOrderBy:function(e){I.value=e,Y("orderCitBy",e)},getSort:function(){return F},setSort:function(e){F.value=e;for(var t in i)i[t]==e&&Y("sortCit",t)},restoreDefaultOrderBy:function(){},addActivatedFilter:function(e){h.push(e)},removeActivatedFilter:function(e){switch(h.splice(h.indexOf(e),1),n.updateCurrentStateParam(e,void 0),r.search(e,null),e){case s.Citations_afterYear:b.value=v;break;case s.Citations_selfCitations:S.value=!1,S.exclude=!0;break;case s.Citations_authors:w.enabled=!1,w.value.length=0;break;case s.Citations_functions_exclude:break;case s.Citations_functions:}},getFilterActivatedList:function(){return h},checkFilters:function(){M(),j(),_(),N()},checkOrder:function(){B(),P()}}}]),myApp.factory("EndpointsManager",["$localStorage",function(e){var t,r;return e.endpoints?t=e.endpoints:e.endpoints=t=["http://two.eelst.cs.unibo.it:8181/data/query"],e.selectedEndpoint?r=e.selectedEndpoint:e.selectedEndpoint=r={value:t[0]},{getEndpoints:function(){return t},removeEndpoint:function(e){t.splice(e,1)},addEndpoint:function(e){t.push(e)},setSelectedEndpoint:function(e){r.value=t[e]},getSelectedEndpoint:function(){return r.value}}}]),myApp.factory("ArticlesInfoService",["$http","$interpolate","$rootScope","EndpointsManager",function(e,t,r,a){var n,o=a.getSelectedEndpoint();n=$("#prefixes").text();var i=function(e,r){var a=$(e).text(),i=n+t(a)(r),s=encodeURIComponent(i);return o+"?format=json&query="+s};return{getArticleGeneralInfo:function(t){var r={work:t},a=i("#query_articleInfo",r);return e.get(a)},requestCitationsInfo:function(t){var r={citedExpression:t},a=i("#query_citationsInfo",r);return e.get(a)},requestCitingArticles:function(t){var r={citedExpression:t},a=i("#query_citingArticles",r);return e.get(a)},getArticleAuthors:function(t){var r={authorsList:t},a=i("#query_articleAuthors",r);return e.get(a)},getArticleIncomingCitationsInfo:function(t){var r={expression:t},a=i("#query_incomingCitationsActs",r);return e.get(a)},getArticleOutgoingCitationsInfo:function(t){var r={expression:t},a=i("#query_outgoingCitationsActs",r);return e.get(a)},requestBiblioInfo:function(t){var r={expression:t},a=i("#query_citedArticles",r);return e.get(a)},getCitationActsInfo:function(t,r){var a={artExpression:t,citedExpression:r},n=i("#query_citationActsInfo",a);return e.get(n)},getCitationActsInfoNotGrouped:function(t,r){var a={artExpression:t,citedExpression:r},n=i("#query_citationActsInfoNotGrouped",a);return e.get(n)},getAllAuthors:function(){var t=$("#query_allAuthors").text(),r=n+t,a=encodeURIComponent(r);return e.get(o+"?format=json&query="+a)},getArticle:function(t){var r={title:t},a=i("#query_singleArticle",r);return e.get(a)},getArticleByDoi:function(t){var r={doi:t},a=i("#query_singleArticleByDoi",r);return e.get(a)},requestArticlesByTitle:function(t){var r={title:t},a=i("#query_articlesWork_fromTitle",r);return e.get(a)},getArticleType:function(t){var r={expression:t},a=i("#query_articleType",r);return e.get(a)}}}]),myApp.factory("AuthorInfoService",["$http","$interpolate","$rootScope","EndpointsManager",function(e,t,r,a){var n=a.getSelectedEndpoint(),o=$("#prefixes").text(),i=function(e,r){var a=$(e).text(),i=o+t(a)(r),s=encodeURIComponent(i);return n+"?format=json&query="+s};return{requestAuthorArticles:function(t,r){var a={authorFamilyName:t,authorGivenName:r},n=i("#query_authorArticles",a);return e.get(n)},requestFullNameAuthorArticles:function(t){var r={authorFullName:t},a=i("#query_FullNameAuthorArticles",r);return e.get(a)}}}]),myApp.factory("Ping",["$http","$rootScope","EndpointsManager","ngDialog",function(e,t,r,a){var n=r.getSelectedEndpoint();return{pingEndpoint:function(){var t="ASK  { ?x ?y ?z }";e({method:"GET",url:n+"?format=json&query="+encodeURIComponent(t),timeout:3e3}).success(function(e,t,r,a){}).error(function(e,t,r,n){return console.log("error"),a.open({template:"app/templates/dialog-error.html"}),!1})}}}]),myApp.factory("RequestArticlesService",["$http","$rootScope",function(e,t){var r="",a="application/rdf+json",n="http://www.semanticlancet.eu/abstractfinder/",o=!1;return{setCompletedRequest:function(){o=!1},isRequestPending:function(){return o},setPendingRequest:function(){o=!0},searchArticles:function(t){o=!0,r=t;var i={method:"GET",params:{query:r},headers:{Accept:a},url:n};return e(i)},setSearchString:function(e){r=e},getSearchString:function(){return r}}}]),myApp.factory("ResponseInterceptorService",["$q",function(e){return{responseError:function(t){return 0===t.status&&console.log("server non contattabile"),e.reject(t)}}}]).config(["$httpProvider",function(e){e.interceptors.push("ResponseInterceptorService")}]),myApp.factory("StatesManagerService",["$sessionStorage","$rootScope","$stateParams",function(e,t,r){var a=[],n={state:void 0,params:void 0};return e.states?a=e.states:e.states=a,e.lastState?n=e.lastState:e.lastState=n,{setState:function(e,t){n.name=e,n.params=t},updateCurrentStateParam:function(e,t){a[a.length-1].params[e]=t},saveState:function(e,t,r){if(r){n.details=r,n.id=t;var o=angular.copy(n);a.push(o)}},restoreState:function(e){for(var t=a.length-1;t>e;t--)a.pop();return a[e]},getStates:function(){return a},getState:function(e){return a[e]},removeAllStates:function(){a.length=0},getStateIndex:function(e,t){var r=-1;for(var n in a)if(a[n].params.searchType==e&&a[n].id==t){r=n;break}return r},getLastState:function(){return a[a.length-1]}}}]);